var sortable=function(){"use strict";var e,t,n=[],r=function(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n},a=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},o=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var n=[],r=0;r<e.length;++r)"string"==typeof t&&a(e[r],t)&&n.push(e[r]),-1!==t.indexOf(e[r])&&n.push(e[r]);return n},i=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)i(e[r],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},s=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)s(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},l=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)l(e[r],t,n);else e.setAttribute(t,n)},d=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)d(e[n],t);else e.removeAttribute(t)},c=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},f=function(e){s(e,"dragstart"),s(e,"dragend"),s(e,"selectstart"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop")},u=function(e){s(e,"dragover"),s(e,"dragenter"),s(e,"drop")},p=function(e,t){var n=function(e){return{draggedItem:e}}(t);!function(e,t){e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text","arbitrary-content"),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t.draggedItem,t.x,t.y)}(e,n=function(e,t){return t.x||(t.x=parseInt(e.pageX-c(t.draggedItem).left)),t.y||(t.y=parseInt(e.pageY-c(t.draggedItem).top)),t}(e,n))},h=function(e,t){var n=e;return m(t)&&(n=e.cloneNode(!0),l(n,"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n},g=function(e,t){var n=r(e,"opts").acceptFrom;return null!==n?!1!==n&&n.split(",").filter(function(e){return e.length>0&&a(t,e)}).length>0:e===t||void 0!==r(e,"connectWith")&&r(e,"connectWith")===r(t,"connectWith")},m=function(e){return!0===r(e,"opts").copy},v=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r},y=function(e){var t,n,a=r(e,"opts")||{},i=o(L(e),a.items),l=v(i,a.handle);u(e),(n=t=e).h5s&&delete n.h5s.data,d(t,"aria-dropeffect"),s(l,"mousedown"),f(i),function(e){d(e,"aria-grabbed"),d(e,"aria-copied"),d(e,"draggable"),d(e,"role")}(i)},b=function(e){var t=r(e,"opts"),n=o(L(e),t.items),a=v(n,t.handle);l(e,"aria-dropeffect","move"),r(e,"_disabled","false"),l(a,"draggable","true"),"function"!=typeof(document||window.document).createElement("span").dragDrop||t.disableIEFix||i(a,"mousedown",function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})},E=function(e){var t=r(e,"opts"),n=o(L(e),t.items),a=v(n,t.handle);r(e,"_disabled","false"),f(n),s(a,"mousedown"),u(e)},x=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},w=function(e){return!!e.parentNode},I=function(e,t){if("string"!=typeof e)return e;var n=document.createElement(t);return n.innerHTML=e,n.firstChild},C=function(e,t){e.parentElement.insertBefore(t,e)},A=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},S=function(e){e.parentNode&&e.parentNode.removeChild(e)},D=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n};var L=function(e){return e.children},O=function(e){return o(L(e),r(e,"items"))};function T(s,d){var f=String(d);if((d=function(e){var t={connectWith:!1,acceptFrom:null,copy:!1,placeholder:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0};for(var n in e)t[n]=e[n];return t}(d))&&"function"==typeof d.getChildren&&(L=d.getChildren),"string"==typeof s&&(s=document.querySelectorAll(s)),s instanceof window.Element&&(s=[s]),s=Array.prototype.slice.call(s),/serialize/.test(f)){var u=[];return s.forEach(function(e){u.push({list:e,children:O(e)})}),u}return s.forEach(function(s){if(/enable|disable|destroy/.test(f))return T[f](s);d=r(s,"opts")||d,r(s,"opts",d),E(s);var u,v,y,F,W=o(L(s),d.items),M=d.placeholder;if(M||(M=document.createElement(/^ul|ol$/i.test(s.tagName)?"li":"div")),(M=I(M,s.tagName)).classList.add.apply(M.classList,d.placeholderClass.split(" ")),r(s,"items",d.items),n.push(M),d.acceptFrom?r(s,"acceptFrom",d.acceptFrom):d.connectWith&&r(s,"connectWith",d.connectWith),b(s),l(W,"role","option"),l(W,"aria-grabbed","false"),d.hoverClass){var N="sortable-over";"string"==typeof d.hoverClass&&(N=d.hoverClass),i(W,"mouseenter",function(){this.classList.add(N)}),i(W,"mouseleave",function(){this.classList.remove(N)})}d.maxItems&&"number"==typeof d.maxItems&&(F=d.maxItems),i(W,"dragstart",function(n){n.stopImmediatePropagation(),d.handle&&!a(n.target,d.handle)||"false"===this.getAttribute("draggable")||(p(n,this),this.classList.add(d.draggingClass),e=h(this,s),l(e,"aria-grabbed","true"),u=x(e),t=parseInt(window.getComputedStyle(e).height),v=this.parentElement,y=O(v),s.dispatchEvent(D("sortstart",{item:e,placeholder:M,startparent:v})))}),i(W,"dragend",function(){var a;e&&(e.classList.remove(d.draggingClass),l(e,"aria-grabbed","false"),"true"===e.getAttribute("aria-copied")&&"true"!==r(e,"dropped")&&S(e),e.style.display=e.oldDisplay,delete e.oldDisplay,n.forEach(S),a=this.parentElement,g(a,v)&&(s.dispatchEvent(D("sortstop",{item:e,startparent:v})),u===x(e)&&v===a||s.dispatchEvent(D("sortupdate",{item:e,index:o(L(a),r(a,"items")).indexOf(e),oldindex:W.indexOf(e),elementIndex:x(e),oldElementIndex:u,startparent:v,endparent:a,newEndList:O(a),newStartList:O(v),oldStartList:y}))),e=null,t=null)}),i([s,M],"drop",function(t){var a;g(s,e.parentElement)&&(t.preventDefault(),t.stopPropagation(),r(e,"dropped","true"),a=n.filter(w)[0],A(a,e))});var P,_,z,Y,q=(P=function(r,a){if(e)if(-1!==W.indexOf(r)){var i=parseInt(window.getComputedStyle(r).height),s=x(M),l=x(r);if(d.forcePlaceholderSize&&(M.style.height=t+"px"),i>t){var f=i-t,u=c(r).top;if(s<l&&a<u+f)return;if(s>l&&a>u+i-f)return}void 0===e.oldDisplay&&(e.oldDisplay=e.style.display),"none"!==e.style.display&&(e.style.display="none"),s<l?A(r,M):C(r,M),n.filter(function(e){return e!==M}).forEach(S)}else-1!==n.indexOf(r)||o(L(r),d.items).length||(n.forEach(S),r.appendChild(M))},_=d.debounce,Y=null,0===_?P:function(){var e=z||this,t=arguments;clearTimeout(Y),Y=setTimeout(function(){P.apply(e,t)},_)}),B=function(t){e&&g(s,e.parentElement)&&"true"!==r(s,"_disabled")&&(F&&o(L(s),r(s,"items")).length>=F||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=m(s)?"copy":"move",q(this,t.pageY)))};i(W.concat(s),"dragover",B),i(W.concat(s),"dragenter",B)}),s}return T.destroy=function(e){y(e)},T.enable=function(e){b(e)},T.disable=function(e){!function(e){var t=r(e,"opts"),n=o(L(e),t.items),a=v(n,t.handle);l(e,"aria-dropeffect","none"),r(e,"_disabled","true"),l(a,"draggable","false"),s(a,"mousedown")}(e)},T}();
//# sourceMappingURL=html5sortable.min.js.map
