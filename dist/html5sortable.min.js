var sortable=function(){"use strict";var e,t;function r(e,t,r){if(void 0===r)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=r}function n(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter(function(e){return 1===e.nodeType&&e.matches(t)})}e=Element.prototype,t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,e.matches=e.matchesSelector=t||function(e){var t=document.querySelectorAll(e),r=this;return Array.prototype.some.call(t,function(e){return e===r})};var o=new Map,i=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach(function(t,r){e[r]=t}),e},set:function(e){if("object"!=typeof e)throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!0,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){if("string"!=typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}();function a(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return o.has(e)||o.set(e,new i),o.get(e)}function l(e,t,r){if(e instanceof Array)for(var n=0;n<e.length;++n)l(e[n],t,r);else e.addEventListener(t,r),a(e).setData("event"+t,r)}function s(e,t){if(e instanceof Array)for(var r=0;r<e.length;++r)s(e[r],t);else e.removeEventListener(t,a(e).getData("event"+t)),a(e).deleteData("event"+t)}function c(e,t,r){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t,r);else e.setAttribute(t,r)}function f(e,t){if(e instanceof Array)for(var r=0;r<e.length;++r)f(e[r],t);else e.removeAttribute(t)}function d(e){if(!e.parentElement)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY}}function u(e,t){if(!(e instanceof HTMLElement&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)}function p(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode}var m=function(e,t,r){if(!(e instanceof HTMLElement&&e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===r?e:e.nextElementSibling)},h=function(e,t){return m(e,t,"before")},g=function(e,t){return m(e,t,"after")};function v(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["height","padding-top","padding-bottom"].map(function(e){var r=parseInt(t.getPropertyValue(e),10);return isNaN(r)?0:r}).reduce(function(e,t){return e+t})}function y(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof t?e:e.filter(function(e){return e.querySelector(t)instanceof HTMLElement}).map(function(e){return e.querySelector(t)})}var E=function(e,t,r){return{element:e,posX:r.pageX-t.left,posY:r.pageY-t.top}};function b(e,t){if(!0===e.isSortable){var r=a(e).getConfig("acceptFrom");if(null!==r&&!1!==r&&"string"!=typeof r)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==r)return!1!==r&&r.split(",").filter(function(e){return e.length>0&&t.matches(e)}).length>0;if(e===t)return!0;if(void 0!==a(e).getConfig("connectWith")&&null!==a(e).getConfig("connectWith"))return a(e).getConfig("connectWith")===a(t).getConfig("connectWith")}return!1}var w,T,L,C,M,S,A,x={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null};function D(e,t){if("string"==typeof a(e).getConfig("hoverClass")){var r=a(e).getConfig("hoverClass").split(" ");!0===t?(l(e,"mousemove",function(e,t){var r=this;if(void 0===t&&(t=250),"function"!=typeof e)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof t)throw new Error("You must provide a number as the second argument for throttle.");var n=null;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i-0]=arguments[i];var a=Date.now();(null===n||a-n>=t)&&(n=a,e.apply(r,o))}}(function(t){0===t.buttons&&n(e.children,a(e).getConfig("items")).forEach(function(e){var n,o;e!==t.target?(n=e.classList).remove.apply(n,r):(o=e.classList).add.apply(o,r)})},a(e).getConfig("throttleTime"))),l(e,"mouseleave",function(){n(e.children,a(e).getConfig("items")).forEach(function(e){var t;(t=e.classList).remove.apply(t,r)})})):(s(e,"mousemove"),s(e,"mouseleave"))}}var I=function(e){s(e,"dragstart"),s(e,"dragend"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop"),s(e,"mouseenter"),s(e,"mouseleave")},H=function(e,t){var r=e;return!0===a(t).getConfig("copy")&&(c(r=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(r),r.style.display="none",r.oldDisplay=e.style.display),r};function Y(e){for(;!0!==e.isSortable;)e=e.parentElement;return e}function _(e,t){var o=r(e,"opts"),i=n(e.children,o.items).filter(function(e){return e.contains(t)});return i.length>0?i[0]:t}var O=function(e){var t,o,i=r(e,"opts")||{},a=n(e.children,i.items),l=y(a,i.handle);s(e,"dragover"),s(e,"dragenter"),s(e,"drop"),(o=t=e).h5s&&delete o.h5s.data,f(t,"aria-dropeffect"),s(l,"mousedown"),I(a),function(e){f(e,"aria-grabbed"),f(e,"aria-copied"),f(e,"draggable"),f(e,"role")}(a)},z=function(e){var t=r(e,"opts"),o=n(e.children,t.items),i=y(o,t.handle);(c(e,"aria-dropeffect","move"),r(e,"_disabled","false"),c(i,"draggable","true"),!1===t.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&l(i,"mousedown",function(){if(-1!==o.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===o.indexOf(e);)e=e.parentElement;e.dragDrop()}}))},F=function(e){var t=r(e,"opts"),o=n(e.children,t.items),i=y(o,t.handle);r(e,"_disabled","false"),I(o),s(i,"mousedown"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop")};function W(e,t){var i=String(t);return t=Object.assign({connectWith:null,acceptFrom:null,copy:!1,placeholder:null,disableIEFix:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,items:null},"object"==typeof t?t:{}),"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(i)?e.map(function(e){var t=r(e,"opts");return function(e,t,o){if(void 0===t&&(t=function(e,t){return e}),void 0===o&&(o=function(e){return e}),!(e instanceof HTMLElement)||1==!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof t||"function"!=typeof o)throw new Error("You need to provide a valid serializer for items and the container.");var i=r(e,"opts").items,a=n(e.children,i),l=a.map(function(t){return{parent:e,node:t,html:t.outerHTML,index:u(t,a)}});return{container:o({node:e,itemCount:l.length}),items:l.map(function(r){return t(r,e)})}}(e,t.itemSerializer,t.containerSerializer)}):(e.forEach(function(e){if(/enable|disable|destroy/.test(i))return W[i](e);["connectWith","disableIEFix"].forEach(function(e){t.hasOwnProperty(e)&&null!==t[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')}),t=Object.assign({},x,t),a(e).config=t,t=r(e,"opts")||t,r(e,"opts",t),e.isSortable=!0,F(e);var s,f=n(e.children,t.items);if(null!==t.placeholder&&void 0!==t.placeholder){var m=document.createElement(e.tagName);m.innerHTML=t.placeholder,s=m.children[0]}a(e).placeholder=function(e,t,r){if(void 0===r&&(r="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof r&&(n=t.classList).add.apply(n,r.split(" ")),t;var n}(e,s,t.placeholderClass),r(e,"items",t.items),t.acceptFrom?r(e,"acceptFrom",t.acceptFrom):t.connectWith&&r(e,"connectWith",t.connectWith),z(e),c(f,"role","option"),c(f,"aria-grabbed","false"),D(e,!0),l(e,"dragstart",function(e){if(!0!==e.target.isSortable&&(e.stopImmediatePropagation(),(!t.handle||e.target.matches(t.handle))&&"false"!==e.target.getAttribute("draggable"))){var r=Y(e.target),o=_(r,e.target);S=n(r.children,t.items),C=S.indexOf(o),M=u(o,r.children),L=r,function(e,t,r){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(r||(r=E),e.dataTransfer&&e.dataTransfer.setDragImage){var n=r(t,d(t),e);if(!(n.element instanceof HTMLElement)||"number"!=typeof n.posX||"number"!=typeof n.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain","arbitrary"),e.dataTransfer.setDragImage(n.element,n.posX,n.posY)}}(e,o,t.customDragImage),T=v(o),o.classList.add(t.draggingClass),c(w=H(o,r),"aria-grabbed","true"),r.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:M,index:C,container:L},item:w}}))}}),l(e,"dragenter",function(t){if(!0!==t.target.isSortable){var o=Y(t.target);A=n(o.children,r(o,"items")).filter(function(t){return t!==a(e).placeholder})}}),l(e,"dragend",function(n){if(w){w.classList.remove(t.draggingClass),c(w,"aria-grabbed","false"),"true"===w.getAttribute("aria-copied")&&"true"!==r(w,"dropped")&&w.remove(),w.style.display=w.oldDisplay,delete w.oldDisplay;var i=Array.from(o.values()).map(function(e){return e.placeholder}).filter(function(e){return e instanceof HTMLElement}).filter(p)[0];i&&i.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:M,index:C,container:L},item:w}})),w=null,T=null}}),l(e,"drop",function(i){if(b(e,w.parentElement)){i.preventDefault(),i.stopPropagation(),r(w,"dropped","true");var l=Array.from(o.values()).map(function(e){return e.placeholder}).filter(function(e){return e instanceof HTMLElement}).filter(p)[0];g(l,w),l.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:M,index:C,container:L},item:w}}));var s=a(e).placeholder,c=n(L.children,t.items).filter(function(e){return e!==s}),f=!0===this.isSortable?this:this.parentElement,d=n(f.children,r(f,"items")).filter(function(e){return e!==s}),m=u(w,Array.from(w.parentElement.children).filter(function(e){return e!==s})),h=u(w,d);M===m&&L===f||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:M,index:C,container:L,itemsBeforeUpdate:S,items:c},destination:{index:h,elementIndex:m,container:f,itemsBeforeUpdate:A,items:d},item:w}}))}});var y,I,O,j=(y=function(e,r,i){if(w)if(t.forcePlaceholderSize&&(a(e).placeholder.style.height=T+"px"),Array.from(e.children).indexOf(r)>-1){var l=v(r),s=u(a(e).placeholder,r.parentElement.children),c=u(r,r.parentElement.children);if(l>T){var f=l-T,p=d(r).top;if(s<c&&i<p)return;if(s>c&&i>p+l-f)return}void 0===w.oldDisplay&&(w.oldDisplay=w.style.display),"none"!==w.style.display&&(w.style.display="none"),s<c?g(r,a(e).placeholder):h(r,a(e).placeholder),Array.from(o.values()).filter(function(e){return void 0!==e.placeholder}).forEach(function(t){t.placeholder!==a(e).placeholder&&t.placeholder.remove()})}else{var m=Array.from(o.values()).filter(function(e){return void 0!==e.placeholder}).map(function(e){return e.placeholder});-1!==m.indexOf(r)||e!==r||n(r.children,t.items).length||(m.forEach(function(e){return e.remove()}),r.appendChild(a(e).placeholder))}},void 0===(I=t.debounce)&&(I=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];clearTimeout(O),O=setTimeout(function(){y.apply(void 0,e)},I)}),N=function(e){var t=e.target,o=!0===t.isSortable?t:Y(t);if(t=_(o,t),w&&b(o,w.parentElement)&&"true"!==r(o,"_disabled")){var i=r(o,"opts");parseInt(i.maxItems)&&n(o.children,r(o,"items")).length>=parseInt(i.maxItems)&&w.parentElement!==o||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===a(o).getConfig("copy")?"copy":"move",j(o,t,e.pageY))}};l(f.concat(e),"dragover",N),l(f.concat(e),"dragenter",N)}),e)}return W.destroy=function(e){O(e)},W.enable=function(e){z(e)},W.disable=function(e){!function(e){var t=r(e,"opts"),o=y(n(e.children,t.items),t.handle);c(e,"aria-dropeffect","none"),r(e,"_disabled","true"),c(o,"draggable","false"),s(o,"mousedown")}(e)},W}();
//# sourceMappingURL=html5sortable.min.js.map
