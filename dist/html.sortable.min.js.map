{"version":3,"sources":["html.sortable.js"],"names":["root","factory","define","amd","exports","module","require","sortable","jQuery","this","$","dragging","draggingHeight","placeholders","sortables","_removeItemEvents","items","off","_removeSortableEvents","_attachGhost","event","ghost","dataTransfer","effectAllowed","setData","setDragImage","item","x","y","_addGhostPos","e","parseInt","pageX","draggedItem","offset","left","pageY","top","_makeGhost","$draggedItem","_getGhost","_getOptions","soptions","options","_removeSortableData","removeData","removeAttr","_removeItemData","_listsConnected","curList","destList","undefined","data","_destroySortable","opts","children","handles","handle","find","_enableSortable","attr","spanEl","document","window","createElement","dragDrop","disableIEFix","on","index","parents","_disableSortable","_reloadSortable","selector","$sortables","method","String","extend","connectWith","placeholder","dragImage","placeholderClass","draggingClass","hoverClass","each","$sortable","test","startParent","newParent","tagName","addClass","id","length","add","hover","removeClass","stopImmediatePropagation","target","is","originalEvent","console","log","height","parent","triggerHandler","startparent","show","detach","get","oldindex","elementIndex","oldElementIndex","endparent","stopPropagation","filter","after","trigger","preventDefault","dropEffect","thisHeight","forcePlaceholderSize","deadZone","offsetTop","hide","before","not","append","destroy","enable","disable","fn"],"mappings":"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","file":"html.sortable.min.js","sourcesContent":[";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.sortable = factory(root.jQuery);\n  }\n}(this, function($) {\n/*\r\n * HTML5 Sortable jQuery Plugin\r\n * https://github.com/voidberg/html5sortable\r\n *\r\n * Original code copyright 2012 Ali Farhadi.\r\n * This version is mantained by Alexandru Badiu <andu@ctrlz.ro> & Lukas Oppermann <lukas@vea.re>\r\n *\r\n *\r\n * Released under the MIT license.\r\n */\r\n'use strict';\r\n/*\r\n * variables global to the plugin\r\n */\r\nvar dragging;\r\nvar draggingHeight;\r\nvar placeholders = $();\r\nvar sortables = [];\r\n/*\r\n * remove event handlers from items\r\n * @param [jquery Collection] items\r\n * @info event.h5s (jquery way of namespacing events, to bind multiple handlers to the event)\r\n */\r\nvar _removeItemEvents = function(items) {\r\n  items.off('dragstart.h5s');\r\n  items.off('dragend.h5s');\r\n  items.off('selectstart.h5s');\r\n  items.off('dragover.h5s');\r\n  items.off('dragenter.h5s');\r\n  items.off('drop.h5s');\r\n};\r\n/*\r\n * remove event handlers from sortable\r\n * @param [jquery Collection] sortable\r\n * @info event.h5s (jquery way of namespacing events, to bind multiple handlers to the event)\r\n */\r\nvar _removeSortableEvents = function(sortable) {\r\n  sortable.off('dragover.h5s');\r\n  sortable.off('dragenter.h5s');\r\n  sortable.off('drop.h5s');\r\n};\r\n/*\r\n * attache ghost to dataTransfer object\r\n * @param [event] original event\r\n * @param [object] ghost-object with item, x and y coordinates\r\n */\r\nvar _attachGhost = function(event, ghost) {\r\n  // this needs to be set for HTML5 drag & drop to work\r\n  event.dataTransfer.effectAllowed = 'move';\r\n  event.dataTransfer.setData('text', '');\r\n\r\n  // check if setDragImage method is available\r\n  if (event.dataTransfer.setDragImage) {\r\n    event.dataTransfer.setDragImage(ghost.item, ghost.x, ghost.y);\r\n  }\r\n};\r\n/**\r\n * _addGhostPos clones the dragged item and adds it as a Ghost item\r\n * @param [object] event - the event fired when dragstart is triggered\r\n * @param [object] ghost - .item = node, draggedItem = jQuery collection\r\n */\r\nvar _addGhostPos = function(e, ghost) {\r\n  if (!ghost.x) {\r\n    ghost.x = parseInt(e.pageX - ghost.draggedItem.offset().left);\r\n  }\r\n  if (!ghost.y) {\r\n    ghost.y = parseInt(e.pageY - ghost.draggedItem.offset().top);\r\n  }\r\n  return ghost;\r\n};\r\n/**\r\n * _makeGhost decides which way to make a ghost and passes it to attachGhost\r\n * @param [jQuery selection] $draggedItem - the item that the user drags\r\n */\r\nvar _makeGhost = function($draggedItem) {\r\n  return {\r\n    item: $draggedItem[0],\r\n    draggedItem: $draggedItem\r\n  };\r\n};\r\n/**\r\n * _getGhost constructs ghost and attaches it to dataTransfer\r\n * @param [event] event - the original drag event object\r\n * @param [jQuery selection] $draggedItem - the item that the user drags\r\n * @param [object] ghostOpt - the ghost options\r\n */\r\n// TODO: could $draggedItem be replaced by event.target in all instances\r\nvar _getGhost = function(event, $draggedItem) {\r\n  // add ghost item & draggedItem to ghost object\r\n  var ghost = _makeGhost($draggedItem);\r\n  // attach ghost position\r\n  ghost = _addGhostPos(event, ghost);\r\n  // attach ghost to dataTransfer\r\n  _attachGhost(event, ghost);\r\n};\r\n/*\r\n * return options if not set on sortable already\r\n * @param [object] soptions\r\n * @param [object] options\r\n */\r\nvar _getOptions = function(soptions, options) {\r\n  if (typeof soptions === 'undefined') {\r\n    return options;\r\n  }\r\n  return soptions;\r\n};\r\n/*\r\n * remove data from sortable\r\n * @param [jquery Collection] a single sortable\r\n */\r\nvar _removeSortableData = function(sortable) {\r\n  sortable.removeData('opts');\r\n  sortable.removeData('connectWith');\r\n  sortable.removeData('items');\r\n  sortable.removeAttr('aria-dropeffect');\r\n};\r\n/*\r\n * remove data from items\r\n * @param [jquery Collection] items\r\n */\r\nvar _removeItemData = function(items) {\r\n  items.removeAttr('aria-grabbed');\r\n  items.removeAttr('draggable');\r\n  items.removeAttr('role');\r\n};\r\n/*\r\n * check if two lists are connected\r\n * @param [jquery Collection] items\r\n */\r\nvar _listsConnected = function(curList, destList) {\r\n  if (curList[0] === destList[0]) {\r\n    return true;\r\n  }\r\n  if (curList.data('connectWith') !== undefined) {\r\n    return curList.data('connectWith') === destList.data('connectWith');\r\n  }\r\n  return false;\r\n};\r\n/*\r\n * destroy the sortable\r\n * @param [jquery Collection] a single sortable\r\n */\r\nvar _destroySortable = function(sortable) {\r\n  var opts = sortable.data('opts') || {};\r\n  var items = sortable.children(opts.items);\r\n  var handles = opts.handle ? items.find(opts.handle) : items;\r\n  // remove event handlers & data from sortable\r\n  _removeSortableEvents(sortable);\r\n  _removeSortableData(sortable);\r\n  // remove event handlers & data from items\r\n  handles.off('mousedown.h5s');\r\n  _removeItemEvents(items);\r\n  _removeItemData(items);\r\n};\r\n/*\r\n * enable the sortable\r\n * @param [jquery Collection] a single sortable\r\n */\r\nvar _enableSortable = function(sortable) {\r\n  var opts = sortable.data('opts');\r\n  var items = sortable.children(opts.items);\r\n  var handles = opts.handle ? items.find(opts.handle) : items;\r\n  sortable.attr('aria-dropeffect', 'move');\r\n  handles.attr('draggable', 'true');\r\n  // IE FIX for ghost\r\n  // can be disabled as it has the side effect that other events\r\n  // (e.g. click) will be ignored\r\n  var spanEl = (document || window.document).createElement('span');\r\n  if (typeof spanEl.dragDrop === 'function' && !opts.disableIEFix) {\r\n    handles.on('mousedown.h5s', function() {\r\n      if (items.index(this) !== -1) {\r\n        this.dragDrop();\r\n      } else {\r\n        $(this).parents(opts.items)[0].dragDrop();\r\n      }\r\n    });\r\n  }\r\n};\r\n/*\r\n * disable the sortable\r\n * @param [jquery Collection] a single sortable\r\n */\r\nvar _disableSortable = function(sortable) {\r\n  var opts = sortable.data('opts');\r\n  var items = sortable.children(opts.items);\r\n  var handles = opts.handle ? items.find(opts.handle) : items;\r\n  sortable.attr('aria-dropeffect', 'none');\r\n  handles.attr('draggable', false);\r\n  handles.off('mousedown.h5s');\r\n};\r\n/*\r\n * reload the sortable\r\n * @param [jquery Collection] a single sortable\r\n * @description events need to be removed to not be double bound\r\n */\r\nvar _reloadSortable = function(sortable) {\r\n  var opts = sortable.data('opts');\r\n  var items = sortable.children(opts.items);\r\n  var handles = opts.handle ? items.find(opts.handle) : items;\r\n  // remove event handlers from items\r\n  _removeItemEvents(items);\r\n  handles.off('mousedown.h5s');\r\n  // remove event handlers from sortable\r\n  _removeSortableEvents(sortable);\r\n};\r\n/*\r\n * public sortable object\r\n * @param [object|string] options|method\r\n */\r\nvar sortable = function(selector, options) {\r\n\r\n  var $sortables = $(selector);\r\n  var method = String(options);\r\n\r\n  options = $.extend({\r\n    connectWith: false,\r\n    placeholder: null,\r\n    // dragImage can be null or a jQuery element\r\n    dragImage: null,\r\n    disableIEFix: false,\r\n    placeholderClass: 'sortable-placeholder',\r\n    draggingClass: 'sortable-dragging',\r\n    hoverClass: false\r\n  }, options);\r\n\r\n  /* TODO: maxstatements should be 25, fix and remove line below */\r\n  /*jshint maxstatements:false */\r\n  return $sortables.each(function() {\r\n\r\n    var $sortable = $(this);\r\n\r\n    if (/enable|disable|destroy/.test(method)) {\r\n      sortable[method]($sortable);\r\n      return;\r\n    }\r\n\r\n    // get options & set options on sortable\r\n    options = _getOptions($sortable.data('opts'), options);\r\n    $sortable.data('opts', options);\r\n    // reset sortable\r\n    _reloadSortable($sortable);\r\n    // initialize\r\n    var items = $sortable.children(options.items);\r\n    var index;\r\n    var startParent;\r\n    var newParent;\r\n    var placeholder = (options.placeholder === null) ? $('<' + (/^ul|ol$/i.test(this.tagName) ? 'li' : 'div') + ' class=\"' + options.placeholderClass + '\"/>') : $(options.placeholder).addClass(options.placeholderClass);\r\n\r\n    // setup sortable ids\r\n    if (!$sortable.attr('data-sortable-id')) {\r\n      var id = sortables.length;\r\n      sortables[id] = $sortable;\r\n      $sortable.attr('data-sortable-id', id);\r\n      items.attr('data-item-sortable-id', id);\r\n    }\r\n\r\n    $sortable.data('items', options.items);\r\n    placeholders = placeholders.add(placeholder);\r\n    if (options.connectWith) {\r\n      $sortable.data('connectWith', options.connectWith);\r\n    }\r\n\r\n    _enableSortable($sortable);\r\n    items.attr('role', 'option');\r\n    items.attr('aria-grabbed', 'false');\r\n\r\n    // Mouse over class\r\n    if (options.hoverClass) {\r\n      var hoverClass = 'sortable-over';\r\n      if (typeof options.hoverClass === 'string') {\r\n        hoverClass = options.hoverClass;\r\n      }\r\n\r\n      items.hover(function() {\r\n        $(this).addClass(hoverClass);\r\n      }, function() {\r\n        $(this).removeClass(hoverClass);\r\n      });\r\n    }\r\n\r\n    // Handle drag events on draggable items\r\n    items.on('dragstart.h5s', function(e) {\r\n      e.stopImmediatePropagation();\r\n      if(options.handle && !$(e.target).is(options.handle)) {\r\n        return;\r\n\t  }\r\n        \r\n      if (options.dragImage) {\r\n        _attachGhost(e.originalEvent, {\r\n          item: options.dragImage,\r\n          x: 0,\r\n          y: 0\r\n        });\r\n        console.log('WARNING: dragImage option is deprecated' +\r\n        ' and will be removed in the future!');\r\n      } else {\r\n        // add transparent clone or other ghost to cursor\r\n        _getGhost(e.originalEvent, $(this), options.dragImage);\r\n      }\r\n      // cache selsection & add attr for dragging\r\n      dragging = $(this);\r\n      dragging.addClass(options.draggingClass);\r\n      dragging.attr('aria-grabbed', 'true');\r\n      // grab values\r\n      index = dragging.index();\r\n      draggingHeight = dragging.height();\r\n      startParent = $(this).parent();\r\n      // trigger sortstar update\r\n      dragging.parent().triggerHandler('sortstart', {\r\n        item: dragging,\r\n        placeholder: placeholder,\r\n        startparent: startParent\r\n      });\r\n    });\r\n    // Handle drag events on draggable items\r\n    items.on('dragend.h5s', function() {\r\n      if (!dragging) {\r\n        return;\r\n      }\r\n      // remove dragging attributes and show item\r\n      dragging.removeClass(options.draggingClass);\r\n      dragging.attr('aria-grabbed', 'false');\r\n      dragging.show();\r\n\r\n      placeholders.detach();\r\n      newParent = $(this).parent();\r\n      dragging.parent().triggerHandler('sortstop', {\r\n        item: dragging,\r\n        startparent: startParent\r\n      });\r\n      if (index !== dragging.index() ||\r\n          startParent.get(0) !== newParent.get(0)) {\r\n        dragging.parent().triggerHandler('sortupdate', {\r\n          item: dragging,\r\n          index: newParent.children(newParent.data('items')).index(dragging),\r\n          oldindex: items.index(dragging),\r\n          elementIndex: dragging.index(),\r\n          oldElementIndex: index,\r\n          startparent: startParent,\r\n          endparent: newParent\r\n        });\r\n      }\r\n      dragging = null;\r\n      draggingHeight = null;\r\n    });\r\n    // Handle drop event on sortable & placeholder\r\n    // TODO: REMOVE placeholder?????\r\n    $(this).add([placeholder]).on('drop.h5s', function(e) {\r\n      if (!_listsConnected($sortable, $(dragging).parent())) {\r\n        return;\r\n      }\r\n\r\n      e.stopPropagation();\r\n      placeholders.filter(':visible').after(dragging);\r\n      dragging.trigger('dragend.h5s');\r\n      return false;\r\n    });\r\n\r\n    // Handle dragover and dragenter events on draggable items\r\n    items.add([this]).on('dragover.h5s dragenter.h5s', function(e) {\r\n      if (!_listsConnected($sortable, $(dragging).parent())) {\r\n        return;\r\n      }\r\n\r\n      e.preventDefault();\r\n      e.originalEvent.dataTransfer.dropEffect = 'move';\r\n      if (items.is(this)) {\r\n        var thisHeight = $(this).height();\r\n        if (options.forcePlaceholderSize) {\r\n          placeholder.height(draggingHeight);\r\n        }\r\n\r\n        // Check if $(this) is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\r\n        if (thisHeight > draggingHeight) {\r\n          // Dead zone?\r\n          var deadZone = thisHeight - draggingHeight;\r\n          var offsetTop = $(this).offset().top;\r\n          if (placeholder.index() < $(this).index() &&\r\n              e.originalEvent.pageY < offsetTop + deadZone) {\r\n            return false;\r\n          }\r\n          if (placeholder.index() > $(this).index() &&\r\n              e.originalEvent.pageY > offsetTop + thisHeight - deadZone) {\r\n            return false;\r\n          }\r\n        }\r\n\r\n        dragging.hide();\r\n        if (placeholder.index() < $(this).index()) {\r\n          $(this).after(placeholder);\r\n        } else {\r\n          $(this).before(placeholder);\r\n        }\r\n        placeholders.not(placeholder).detach();\r\n      } else {\r\n        if (!placeholders.is(this) && !$(this).children(options.items).length) {\r\n          placeholders.detach();\r\n          $(this).append(placeholder);\r\n        }\r\n      }\r\n      return false;\r\n    });\r\n  });\r\n};\r\n\r\nsortable.destroy = function(sortable) {\r\n  _destroySortable(sortable);\r\n};\r\n\r\nsortable.enable = function(sortable) {\r\n  _enableSortable(sortable);\r\n};\r\n\r\nsortable.disable = function(sortable) {\r\n  _disableSortable(sortable);\r\n};\r\n\r\n$.fn.sortable = function(options) {\r\n  return sortable(this, options);\r\n};\r\n\r\n\nreturn sortable;\n}));\n"],"sourceRoot":"/source/"}