{"version":3,"sources":["html.sortable.js"],"names":["root","factory","define","amd","exports","module","sortable","this","_debounce","fn","delay","context","timer","eContext","args","arguments","clearTimeout","setTimeout","apply","_getChildren","element","children","dragging","draggingHeight","placeholders","sortables","_data","key","value","undefined","h5s","data","_removeData","_matches","el","selector","matches","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","call","_filter","nodes","wanted","Array","prototype","slice","result","i","length","push","indexOf","_on","event","callback","addEventListener","events","_off","removeEventListener","_attr","attribute","setAttribute","_removeAttr","removeAttribute","_offset","rect","getClientRects","left","window","scrollX","top","scrollY","_removeItemEvents","items","_removeSortableEvents","_attachGhost","ghost","dataTransfer","effectAllowed","setData","setDragImage","draggedItem","x","y","_addGhostPos","parseInt","pageX","pageY","_makeGhost","_getGhost","_removeSortableData","_removeItemData","_listsConnected","curList","destList","_getHandles","handle","handles","querySelectorAll","concat","_destroySortable","sortableElement","opts","_enableSortable","spanEl","document","createElement","dragDrop","disableIEFix","parent","parentElement","_disableSortable","_reloadSortable","_index","_attached","parentNode","_html2element","html","tagName","innerHTML","firstChild","_before","target","insertBefore","_after","nextElementSibling","_detach","removeChild","_makeEvent","name","detail","e","createEvent","initEvent","_dispatchEventOnConnected","forEach","dispatchEvent","sortableElements","options","method","String","getChildren","connectWith","placeholder","dragImage","placeholderClass","draggingClass","hoverClass","debounce","option","Element","test","index","startParent","classList","add","split","getAttribute","id","remove","stopImmediatePropagation","console","log","getComputedStyle","height","item","startparent","newParent","style","display","oldDisplay","oldindex","elementIndex","oldElementIndex","endparent","visiblePlaceholder","preventDefault","stopPropagation","filter","debouncedDragOverEnter","thisHeight","placeholderIndex","thisIndex","forcePlaceholderSize","deadZone","offsetTop","appendChild","onDragOverEnter","dropEffect","destroy","enable","disable"],"mappings":"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","file":"html.sortable.min.js","sourcesContent":[";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.sortable = factory();\n  }\n}(this, function() {\n/*\n * HTML5 Sortable library\n * https://github.com/voidberg/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Lukas Oppermann <lukas@vea.re>\n * Previously also mantained by Alexandru Badiu <andu@ctrlz.ro>\n * jQuery-independent implementation by Nazar Mokrynskyi <nazar@mokrynskyi.com>\n *\n * Released under the MIT license.\n */\n'use strict'\n/*\n * variables global to the plugin\n */\nvar dragging\nvar draggingHeight\nvar placeholders = []\nvar sortables = []\n/**\n * Get or set data on element\n * @param {Element} element\n * @param {string} key\n * @param {*} value\n * @return {*}\n */\nvar _data = function (element, key, value) {\n  if (value === undefined) {\n    return element && element.h5s && element.h5s.data && element.h5s.data[key]\n  } else {\n    element.h5s = element.h5s || {}\n    element.h5s.data = element.h5s.data || {}\n    element.h5s.data[key] = value\n  }\n}\n/**\n * Remove data from element\n * @param {Element} element\n */\nvar _removeData = function (element) {\n  if (element.h5s) {\n    delete element.h5s.data\n  }\n}\n/**\n * Tests if an element matches a given selector. Comparable to jQuery's $(el).is('.my-class')\n * @param {el} DOM element\n * @param {selector} selector test against the element\n * @retirms {boolean}\n */\nvar _matches = function (el, selector) {\n  return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector)\n}\n/**\n * Filter only wanted nodes\n * @param {Array|NodeList} nodes\n * @param {Array/string} wanted\n * @returns {Array}\n */\nvar _filter = function (nodes, wanted) {\n  if (!wanted) {\n    return Array.prototype.slice.call(nodes)\n  }\n  var result = []\n  for (var i = 0; i < nodes.length; ++i) {\n    if (typeof wanted === 'string' && _matches(nodes[i], wanted)) {\n      result.push(nodes[i])\n    }\n    if (wanted.indexOf(nodes[i]) !== -1) {\n      result.push(nodes[i])\n    }\n  }\n  return result\n}\n/**\n * @param {Array|Element} element\n * @param {Array|string} event\n * @param {Function} callback\n */\nvar _on = function (element, event, callback) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _on(element[i], event, callback)\n    }\n    return\n  }\n  element.addEventListener(event, callback)\n  element.h5s = element.h5s || {}\n  element.h5s.events = element.h5s.events || {}\n  element.h5s.events[event] = callback\n}\n/**\n * @param {Array|Element} element\n * @param {Array|string} event\n */\nvar _off = function (element, event) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _off(element[i], event)\n    }\n    return\n  }\n  if (element.h5s && element.h5s.events && element.h5s.events[event]) {\n    element.removeEventListener(event, element.h5s.events[event])\n    delete element.h5s.events[event]\n  }\n}\n/**\n * @param {Array|Element} element\n * @param {string} attribute\n * @param {*} value\n */\nvar _attr = function (element, attribute, value) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _attr(element[i], attribute, value)\n    }\n    return\n  }\n  element.setAttribute(attribute, value)\n}\n/**\n * @param {Array|Element} element\n * @param {string} attribute\n */\nvar _removeAttr = function (element, attribute) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _removeAttr(element[i], attribute)\n    }\n    return\n  }\n  element.removeAttribute(attribute)\n}\n/**\n * @param {Element} element\n * @returns {{left: *, top: *}}\n */\nvar _offset = function (element) {\n  var rect = element.getClientRects()[0]\n  return {\n    left: rect.left + window.scrollX,\n    top: rect.top + window.scrollY\n  }\n}\n/*\n * remove event handlers from items\n * @param {Array|NodeList} items\n */\nvar _removeItemEvents = function (items) {\n  _off(items, 'dragstart')\n  _off(items, 'dragend')\n  _off(items, 'selectstart')\n  _off(items, 'dragover')\n  _off(items, 'dragenter')\n  _off(items, 'drop')\n}\n/*\n * Remove event handlers from sortable\n * @param {Element} sortable a single sortable\n */\nvar _removeSortableEvents = function (sortable) {\n  _off(sortable, 'dragover')\n  _off(sortable, 'dragenter')\n  _off(sortable, 'drop')\n}\n/*\n * Attach ghost to dataTransfer object\n * @param {Event} original event\n * @param {object} ghost-object with item, x and y coordinates\n */\nvar _attachGhost = function (event, ghost) {\n  // this needs to be set for HTML5 drag & drop to work\n  event.dataTransfer.effectAllowed = 'move'\n  event.dataTransfer.setData('text', '')\n\n  // check if setDragImage method is available\n  if (event.dataTransfer.setDragImage) {\n    event.dataTransfer.setDragImage(ghost.draggedItem, ghost.x, ghost.y)\n  }\n}\n/**\n * _addGhostPos clones the dragged item and adds it as a Ghost item\n * @param {Event} event - the event fired when dragstart is triggered\n * @param {object} ghost - .draggedItem = Element\n */\nvar _addGhostPos = function (event, ghost) {\n  if (!ghost.x) {\n    ghost.x = parseInt(event.pageX - _offset(ghost.draggedItem).left)\n  }\n  if (!ghost.y) {\n    ghost.y = parseInt(event.pageY - _offset(ghost.draggedItem).top)\n  }\n  return ghost\n}\n/**\n * _makeGhost decides which way to make a ghost and passes it to attachGhost\n * @param {Element} draggedItem - the item that the user drags\n */\nvar _makeGhost = function (draggedItem) {\n  return {\n    draggedItem: draggedItem\n  }\n}\n/**\n * _getGhost constructs ghost and attaches it to dataTransfer\n * @param {Event} event - the original drag event object\n * @param {Element} draggedItem - the item that the user drags\n */\n// TODO: could draggedItem be replaced by event.target in all instances\nvar _getGhost = function (event, draggedItem) {\n  // add ghost item & draggedItem to ghost object\n  var ghost = _makeGhost(draggedItem)\n  // attach ghost position\n  ghost = _addGhostPos(event, ghost)\n  // attach ghost to dataTransfer\n  _attachGhost(event, ghost)\n}\n/*\n * Remove data from sortable\n * @param {Element} sortable a single sortable\n */\nvar _removeSortableData = function (sortable) {\n  _removeData(sortable)\n  _removeAttr(sortable, 'aria-dropeffect')\n}\n/*\n * Remove data from items\n * @param {Array|Element} items\n */\nvar _removeItemData = function (items) {\n  _removeAttr(items, 'aria-grabbed')\n  _removeAttr(items, 'draggable')\n  _removeAttr(items, 'role')\n}\n/*\n * Check if two lists are connected\n * @param {Element} curList\n * @param {Element} destList\n */\nvar _listsConnected = function (curList, destList) {\n  if (curList === destList) {\n    return true\n  }\n  if (_data(curList, 'connectWith') !== undefined) {\n    return _data(curList, 'connectWith') === _data(destList, 'connectWith')\n  }\n  return false\n}\nvar _getHandles = function (items, handle) {\n  var result = []\n  var handles\n  if (!handle) {\n    return items\n  }\n  for (var i = 0; i < items.length; ++i) {\n    handles = items[i].querySelectorAll(handle)\n    result = result.concat(Array.prototype.slice.call(handles))\n  }\n  return result\n}\n/*\n * Destroy the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _destroySortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts') || {}\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  // remove event handlers & data from sortable\n  _removeSortableEvents(sortableElement)\n  _removeSortableData(sortableElement)\n  // remove event handlers & data from items\n  _off(handles, 'mousedown')\n  _removeItemEvents(items)\n  _removeItemData(items)\n}\n/*\n * Enable the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _enableSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'move')\n  _attr(handles, 'draggable', 'true')\n  // IE FIX for ghost\n  // can be disabled as it has the side effect that other events\n  // (e.g. click) will be ignored\n  var spanEl = (document || window.document).createElement('span')\n  if (typeof spanEl.dragDrop === 'function' && !opts.disableIEFix) {\n    _on(handles, 'mousedown', function () {\n      if (items.indexOf(this) !== -1) {\n        this.dragDrop()\n      } else {\n        var parent = this.parentElement\n        while (items.indexOf(parent) === -1) {\n          parent = parent.parentElement\n        }\n        parent.dragDrop()\n      }\n    })\n  }\n}\n/*\n * Disable the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _disableSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'none')\n  _attr(handles, 'draggable', 'false')\n  _off(handles, 'mousedown')\n}\n/*\n * Reload the sortable\n * @param {Element} sortableElement a single sortable\n * @description events need to be removed to not be double bound\n */\nvar _reloadSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  // remove event handlers from items\n  _removeItemEvents(items)\n  _off(handles, 'mousedown')\n  // remove event handlers from sortable\n  _removeSortableEvents(sortableElement)\n}\n/**\n * Get position of the element relatively to its sibling elements\n * @param {Element} element\n * @returns {number}\n */\nvar _index = function (element) {\n  if (!element.parentElement) {\n    return 0\n  }\n  return Array.prototype.indexOf.call(element.parentElement.children, element)\n}\n/**\n * Whether element is in DOM\n * @param {Element} element\n * @returns {boolean}\n */\nvar _attached = function (element) {\n  return !!element.parentNode\n}\n/**\n * Convert HTML string into DOM element.\n * @param {Element|string} html\n * @param {string} tagname\n * @returns {Element}\n */\nvar _html2element = function (html, tagName) {\n  if (typeof html !== 'string') {\n    return html\n  }\n  var parentElement = document.createElement(tagName)\n  parentElement.innerHTML = html\n  return parentElement.firstChild\n}\n/**\n * Insert before target\n * @param {Element} target\n * @param {Element} element\n */\nvar _before = function (target, element) {\n  target.parentElement.insertBefore(\n    element,\n    target\n  )\n}\n/**\n * Insert after target\n * @param {Element} target\n * @param {Element} element\n */\nvar _after = function (target, element) {\n  target.parentElement.insertBefore(\n    element,\n    target.nextElementSibling\n  )\n}\n/**\n * Detach element from DOM\n * @param {Element} element\n */\nvar _detach = function (element) {\n  if (element.parentNode) {\n    element.parentNode.removeChild(element)\n  }\n}\n/**\n * Make native event that can be dispatched afterwards\n * @param {string} name\n * @param {object} detail\n * @returns {CustomEvent}\n */\nvar _makeEvent = function (name, detail) {\n  var e = document.createEvent('Event')\n  if (detail) {\n    e.detail = detail\n  }\n  e.initEvent(name, false, true)\n  return e\n}\n/**\n * @param {Element} sortableElement\n * @param {CustomEvent} event\n */\nvar _dispatchEventOnConnected = function (sortableElement, event) {\n  sortables.forEach(function (target) {\n    if (_listsConnected(sortableElement, target)) {\n      target.dispatchEvent(event)\n    }\n  })\n}\n\n/**\n * Creates and returns a new debounced version of the passed function which will postpone its execution until after wait milliseconds have elapsed\n * @param {fn} Function to debounce\n * @param {delay} time to wait before calling function with latest arguments, 0 - no debounce\n * @param {context} time to wait before calling function with latest arguments, 0 - no debounce\n * @returns {function} - debounced function\n */\nfunction _debounce (fn, delay, context) {\n  var timer = null\n\n  if (delay === 0) {\n    return fn\n  }\n  return function () {\n    var eContext = context || this\n    var args = arguments\n    clearTimeout(timer)\n    timer = setTimeout(function () {\n      fn.apply(eContext, args)\n    }, delay)\n  }\n}\n\nfunction _getChildren(element) {\n  return element.children;\n}\n\n/*\n * Public sortable object\n * @param {Array|NodeList} sortableElements\n * @param {object|string} options|method\n */\nvar sortable = function (sortableElements, options) {\n  var method = String(options)\n\n  if (typeof options.getChildren === 'function'){\n    _getChildren = options.getChildren\n  }\n\n  options = (function (options) {\n    var result = {\n      connectWith: false,\n      placeholder: null,\n      // dragImage can be null or a Element\n      dragImage: null,\n      disableIEFix: false,\n      placeholderClass: 'sortable-placeholder',\n      draggingClass: 'sortable-dragging',\n      hoverClass: false,\n      debounce: 0\n    }\n    for (var option in options) {\n      if(typeof options[option] !== 'function'){\n        result[option] = options[option]\n      }\n    }\n    return result\n  })(options)\n\n  if (typeof sortableElements === 'string') {\n    sortableElements = document.querySelectorAll(sortableElements)\n  }\n\n  if (sortableElements instanceof window.Element) {\n    sortableElements = [sortableElements]\n  }\n\n  sortableElements = Array.prototype.slice.call(sortableElements)\n\n  /* TODO: maxstatements should be 25, fix and remove line below */\n  /* jshint maxstatements:false */\n  sortableElements.forEach(function (sortableElement) {\n    if (/enable|disable|destroy/.test(method)) {\n      sortable[method](sortableElement)\n      return\n    }\n\n    // get options & set options on sortable\n    options = _data(sortableElement, 'opts') || options\n    _data(sortableElement, 'opts', options)\n    // reset sortable\n    _reloadSortable(sortableElement)\n    // initialize\n    var items = _filter(_getChildren(sortableElement), options.items)\n    var index\n    var startParent\n    var placeholder = options.placeholder\n    if (!placeholder) {\n      placeholder = document.createElement(\n        /^ul|ol$/i.test(sortableElement.tagName) ? 'li' : 'div'\n      )\n    }\n    placeholder = _html2element(placeholder, sortableElement.tagName)\n    placeholder.classList.add.apply(\n      placeholder.classList,\n      options.placeholderClass.split(' ')\n    )\n\n    // setup sortable ids\n    if (!sortableElement.getAttribute('data-sortable-id')) {\n      var id = sortables.length\n      sortables[id] = sortableElement\n      _attr(sortableElement, 'data-sortable-id', id)\n      _attr(items, 'data-item-sortable-id', id)\n    }\n\n    _data(sortableElement, 'items', options.items)\n    placeholders.push(placeholder)\n    if (options.connectWith) {\n      _data(sortableElement, 'connectWith', options.connectWith)\n    }\n\n    _enableSortable(sortableElement)\n    _attr(items, 'role', 'option')\n    _attr(items, 'aria-grabbed', 'false')\n\n    // Mouse over class\n    if (options.hoverClass) {\n      var hoverClass = 'sortable-over'\n      if (typeof options.hoverClass === 'string') {\n        hoverClass = options.hoverClass\n      }\n\n      _on(items, 'mouseenter', function () {\n        this.classList.add(hoverClass)\n      })\n      _on(items, 'mouseleave', function () {\n        this.classList.remove(hoverClass)\n      })\n    }\n\n    // Handle drag events on draggable items\n    _on(items, 'dragstart', function (e) {\n      e.stopImmediatePropagation()\n      if (options.handle && !_matches(e.target, options.handle)) {\n        return\n      }\n\n      if (options.dragImage) {\n        _attachGhost(e, {\n          draggedItem: options.dragImage,\n          x: 0,\n          y: 0\n        })\n        console.log('WARNING: dragImage option is deprecated' +\n        ' and will be removed in the future!')\n      } else {\n        // add transparent clone or other ghost to cursor\n        _getGhost(e, this)\n      }\n      // cache selsection & add attr for dragging\n      this.classList.add(options.draggingClass)\n      dragging = this\n      _attr(dragging, 'aria-grabbed', 'true')\n      // grab values\n      index = _index(dragging)\n      draggingHeight = parseInt(window.getComputedStyle(dragging).height)\n      startParent = this.parentElement\n      // dispatch sortstart event on each element in group\n      _dispatchEventOnConnected(sortableElement, _makeEvent('sortstart', {\n        item: dragging,\n        placeholder: placeholder,\n        startparent: startParent\n      }))\n    })\n    // Handle drag events on draggable items\n    _on(items, 'dragend', function () {\n      var newParent\n      if (!dragging) {\n        return\n      }\n      // remove dragging attributes and show item\n      dragging.classList.remove(options.draggingClass)\n      _attr(dragging, 'aria-grabbed', 'false')\n      dragging.style.display = dragging.oldDisplay\n      delete dragging.oldDisplay\n\n      placeholders.forEach(_detach)\n      newParent = this.parentElement\n      _dispatchEventOnConnected(sortableElement, _makeEvent('sortstop', {\n        item: dragging,\n        startparent: startParent\n      }))\n      if (index !== _index(dragging) || startParent !== newParent) {\n        _dispatchEventOnConnected(sortableElement, _makeEvent('sortupdate', {\n          item: dragging,\n          index: _filter(_getChildren(newParent), _data(newParent, 'items'))\n              .indexOf(dragging),\n          oldindex: items.indexOf(dragging),\n          elementIndex: _index(dragging),\n          oldElementIndex: index,\n          startparent: startParent,\n          endparent: newParent\n        }))\n      }\n      dragging = null\n      draggingHeight = null\n    })\n    // Handle drop event on sortable & placeholder\n    // TODO: REMOVE placeholder?????\n    _on([sortableElement, placeholder], 'drop', function (e) {\n      var visiblePlaceholder\n      if (!_listsConnected(sortableElement, dragging.parentElement)) {\n        return\n      }\n\n      e.preventDefault()\n      e.stopPropagation()\n      visiblePlaceholder = placeholders.filter(_attached)[0]\n      _after(visiblePlaceholder, dragging)\n      dragging.dispatchEvent(_makeEvent('dragend'))\n    })\n\n    var debouncedDragOverEnter = _debounce(function (element, pageY) {\n      if (!dragging) {\n        return\n      }\n\n      if (items.indexOf(element) !== -1) {\n        var thisHeight = parseInt(window.getComputedStyle(element).height)\n        var placeholderIndex = _index(placeholder)\n        var thisIndex = _index(element)\n        if (options.forcePlaceholderSize) {\n          placeholder.style.height = draggingHeight + 'px'\n        }\n\n        // Check if `element` is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          var deadZone = thisHeight - draggingHeight\n          var offsetTop = _offset(element).top\n          if (placeholderIndex < thisIndex &&\n              pageY < offsetTop + deadZone) {\n            return\n          }\n          if (placeholderIndex > thisIndex &&\n              pageY > offsetTop + thisHeight - deadZone) {\n            return\n          }\n        }\n\n        if (dragging.oldDisplay === undefined) {\n          dragging.oldDisplay = dragging.style.display\n        }\n        dragging.style.display = 'none'\n        if (placeholderIndex < thisIndex) {\n          _after(element, placeholder)\n        } else {\n          _before(element, placeholder)\n        }\n        // Intentionally violated chaining, it is more complex otherwise\n        placeholders\n          .filter(function (element) { return element !== placeholder })\n          .forEach(_detach)\n      } else {\n        if (placeholders.indexOf(element) === -1 &&\n            !_filter(_getChildren(element), options.items).length) {\n          placeholders.forEach(_detach)\n          element.appendChild(placeholder)\n        }\n      }\n    }, options.debounce)\n\n    // Handle dragover and dragenter events on draggable items\n    var onDragOverEnter = function (e) {\n      if (!_listsConnected(sortableElement, dragging.parentElement)) {\n        return\n      }\n\n      e.preventDefault()\n      e.stopPropagation()\n      e.dataTransfer.dropEffect = 'move'\n      debouncedDragOverEnter(this, e.pageY)\n    }\n\n    _on(items.concat(sortableElement), 'dragover', onDragOverEnter)\n    _on(items.concat(sortableElement), 'dragenter', onDragOverEnter)\n  })\n\n  return sortableElements\n}\n\nsortable.destroy = function (sortableElement) {\n  _destroySortable(sortableElement)\n}\n\nsortable.enable = function (sortableElement) {\n  _enableSortable(sortableElement)\n}\n\nsortable.disable = function (sortableElement) {\n  _disableSortable(sortableElement)\n}\n\n\nreturn sortable;\n}));\n"]}