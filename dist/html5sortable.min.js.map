{"version":3,"file":"html5sortable.min.js","sources":["../src/polyfill.ts","../src/data.ts","../src/filter.ts","../src/store.ts","../src/eventListener.ts","../src/attribute.ts","../src/offset.ts","../src/index.ts","../src/isInDom.ts","../src/insertHtmlElements.ts","../src/elementHeight.ts","../src/getHandles.ts","../src/setDragImage.ts","../src/isConnected.ts","../src/html5sortable.ts","../src/defaultConfiguration.ts","../src/hoverClass.ts","../src/throttle.ts","../src/serialize.ts","../src/makePlaceholder.ts","../src/debounce.ts"],"sourcesContent":["(function(e) {\r\n    var matches = e.matches || e.matchesSelector || e.webkitMatchesSelector || e.mozMatchesSelector || e.msMatchesSelector || e.oMatchesSelector;\r\n    !matches ? (e.matches = e.matchesSelector = function matches(selector) {\r\n        var matches = document.querySelectorAll(selector);\r\n        var th = this;\r\n        return Array.prototype.some.call(matches, function(e) {\r\n            return e === th;\r\n        });\r\n    }) : (e.matches = e.matchesSelector = matches);\r\n})(Element.prototype);","/**\n * Get or set data on element\n * @param {HTMLElement} element\n * @param {string} key\n * @param {any} value\n * @return {*}\n */\n\nfunction addData (element: HTMLElement, key: string, value?: any): HTMLElement|configuration|string|void {\n  if (value === undefined) {\n    return element && element.h5s && element.h5s.data && element.h5s.data[key]\n  } else {\n    element.h5s = element.h5s || {}\n    element.h5s.data = element.h5s.data || {}\n    element.h5s.data[key] = value\n  }\n}\n/**\n * Remove data from element\n * @param {HTMLElement} element\n */\nfunction removeData (element: HTMLElement) {\n  if (element.h5s) {\n    delete element.h5s.data\n  }\n}\n\nexport { addData, removeData }\n","/* eslint-env browser */\n/**\n * Filter only wanted nodes\n * @param {NodeList|HTMLCollection|Array} nodes\n * @param {String} selector\n * @returns {Array}\n */\nexport default (nodes: NodeList|HTMLCollection|Array<HTMLElement>, selector: string): Array<HTMLElement> => {\n  if (!(nodes instanceof NodeList || nodes instanceof HTMLCollection || nodes instanceof Array)) {\n    throw new Error('You must provide a nodeList/HTMLCollection/Array of elements to be filtered.')\n  }\n  if (typeof selector !== 'string') {\n    return Array.from(nodes)\n  }\n\n  return Array.from(nodes).filter((item) => item.nodeType === 1 && item.matches(selector))\n}\n","/* eslint-env browser */\nexport let stores: Map<HTMLElement, Store> = new Map()\n/**\n * Stores data & configurations per Sortable\n * @param {Object} config\n */\nexport class Store implements Store {\n  private _config: Map<string, any> = new Map() // eslint-disable-line no-undef\n  private _placeholder?: HTMLElement = undefined // eslint-disable-line no-undef\n  private _data: Map<string, any> = new Map() // eslint-disable-line no-undef\n  /**\n   * set the configuration of a class instance\n   * @method config\n   * @param {object} config object of configurations\n   */\n  set config (config: configuration) {\n    if (typeof config !== 'object') {\n      throw new Error('You must provide a valid configuration object to the config setter.')\n    }\n    // combine config with default\n    let mergedConfig = Object.assign({}, config)\n    // add config to map\n    this._config = new Map(Object.entries(mergedConfig))\n  }\n  /**\n   * get the configuration map of a class instance\n   * @method config\n   * @return {object}\n   */\n  get config (): configuration {\n    // transform Map to object\n    let config = {}\n    this._config.forEach((value, key) => {\n      config[key] = value\n    })\n    // return object\n    return config\n  }\n  /**\n   * set individual configuration of a class instance\n   * @method setConfig\n   * @param  key valid configuration key\n   * @param  value any value\n   * @return void\n   */\n  setConfig (key: string, value: any): void {\n    if (!this._config.has(key)) {\n      throw new Error(`Trying to set invalid configuration item: ${key}`)\n    }\n    // set config\n    this._config.set(key, value)\n  }\n  /**\n   * get an individual configuration of a class instance\n   * @method getConfig\n   * @param  key valid configuration key\n   * @return any configuration value\n   */\n  getConfig (key: string): any {\n    if (!this._config.has(key)) {\n      throw new Error(`Invalid configuration item requested: ${key}`)\n    }\n    return this._config.get(key)\n  }\n  /**\n   * get the placeholder for a class instance\n   * @method placeholder\n   * @return {HTMLElement|null}\n   */\n  get placeholder (): HTMLElement {\n    return this._placeholder\n  }\n  /**\n   * set the placeholder for a class instance\n   * @method placeholder\n   * @param {HTMLElement} placeholder\n   * @return {void}\n   */\n  set placeholder (placeholder: HTMLElement): void {\n    if (!(placeholder instanceof HTMLElement) && placeholder !== null) {\n      throw new Error('A placeholder must be an html element or null.')\n    }\n    this._placeholder = placeholder\n  }\n  /**\n   * set an data entry\n   * @method setData\n   * @param {string} key\n   * @param {any} value\n   * @return {void}\n   */\n  setData (key: string, value: Function): void {\n    if (typeof key !== 'string') {\n      throw new Error(`The key must be a string.`)\n    }\n    this._data.set(key, value)\n  }\n  /**\n   * get an data entry\n   * @method getData\n   * @param {string} key an existing key\n   * @return {any}\n   */\n  getData (key: string): any {\n    if (typeof key !== 'string') {\n      throw new Error(`The key must be a string.`)\n    }\n    return this._data.get(key)\n  }\n  /**\n   * delete an data entry\n   * @method deleteData\n   * @param {string} key an existing key\n   * @return {boolean}\n   */\n  deleteData (key: string): boolean {\n    if (typeof key !== 'string') {\n      throw new Error(`The key must be a string.`)\n    }\n    return this._data.delete(key)\n  }\n}\n/**\n * @param {HTMLElement} sortableElement\n * @returns {Class: Store}\n */\nexport default (sortableElement: HTMLElement): Store => {\n  // if sortableElement is wrong type\n  if (!(sortableElement instanceof HTMLElement)) {\n    throw new Error('Please provide a sortable to the store function.')\n  }\n  // create new instance if not avilable\n  if (!stores.has(sortableElement)) {\n    stores.set(sortableElement, new Store())\n  }\n  // return instance\n  return stores.get(sortableElement)\n}\n","import store from './store'\n/**\n * @param {Array|HTMLElement} element\n * @param {Function} callback\n * @param {string} event\n */\nfunction addEventListener (element: Array<HTMLElement>|HTMLElement, eventName:string, callback: () => void) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      addEventListener(element[i], eventName, callback)\n    }\n    return\n  }\n  element.addEventListener(eventName, callback)\n  store(element).setData(`event${eventName}`, callback)\n}\n/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} eventName\n */\nfunction removeEventListener (element: Array<HTMLElement>|HTMLElement, eventName: string) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      removeEventListener(element[i], eventName)\n    }\n    return\n  }\n  element.removeEventListener(eventName, store(element).getData(`event${eventName}`))\n  store(element).deleteData(`event${eventName}`)\n}\n\nexport { addEventListener, removeEventListener }\n","/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction addAttribute (element: Array<HTMLElement>|HTMLElement, attribute:string, value:string) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      addAttribute(element[i], attribute, value)\n    }\n    return\n  }\n  element.setAttribute(attribute, value)\n}\n/**\n * @param {Array|HTMLElement} element\n * @param {string} attribute\n */\nfunction removeAttribute (element: Array<HTMLElement>|HTMLElement, attribute:string) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      removeAttribute(element[i], attribute)\n    }\n    return\n  }\n  element.removeAttribute(attribute)\n}\n\nexport { addAttribute, removeAttribute }\n","/**\n * @param {HTMLElement} element\n * @returns {Object}\n */\nexport default (element: HTMLElement): offsetObject => {\n  if (!element.parentElement) {\n    throw new Error('target element must be part of the dom')\n  }\n\n  let rect = element.getClientRects()[0]\n  return {\n    left: rect.left + window.scrollX,\n    right: rect.right + window.scrollX,\n    top: rect.top + window.scrollY,\n    bottom: rect.bottom + window.scrollY\n  }\n}\n","/* eslint-env browser */\n/**\n * Get position of the element relatively to its sibling elements\n * @param {HTMLElement} element\n * @returns {number}\n */\nexport default (element: HTMLElement, elementList: HTMLCollection | NodeList | Array<HTMLElement>): number => {\n  if (!(element instanceof HTMLElement) || !(elementList instanceof NodeList || elementList instanceof HTMLCollection || elementList instanceof Array)) {\n    throw new Error('You must provide an element and a list of elements.')\n  }\n\n  return Array.from(elementList).indexOf(element)\n}\n","/* eslint-env browser */\n/**\n * Test whether element is in DOM\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nexport default (element: HTMLElement): boolean => {\n  if (!(element instanceof HTMLElement)) {\n    throw new Error('Element is not a node element.')\n  }\n\n  return element.parentNode !== null\n}\n","/* eslint-env browser */\n/**\n * Insert node before or after target\n * @param {HTMLElement} referenceNode - reference element\n * @param {HTMLElement} newElement - element to be inserted\n * @param {String} position - insert before or after reference element\n */\nlet insertNode = (referenceNode: HTMLElement, newElement: HTMLElement, position: String) => {\n  if (!(referenceNode instanceof HTMLElement) || !(referenceNode.parentElement instanceof HTMLElement)) {\n    throw new Error('target and element must be a node')\n  }\n  referenceNode.parentElement.insertBefore(\n    newElement,\n    (position === 'before' ? referenceNode : referenceNode.nextElementSibling)\n  )\n}\n/**\n * Insert before target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nlet insertBefore = (target: HTMLElement, element: HTMLElement) => insertNode(target, element, 'before')\n/**\n * Insert after target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nlet insertAfter = (target: HTMLElement, element: HTMLElement) => insertNode(target, element, 'after')\n\nexport { insertBefore, insertAfter }\n","/* eslint-env browser */\n/**\n * Get height of an element including padding\n * @param {HTMLElement} element an dom element\n */\nexport default (element: HTMLElement) => {\n  if (!(element instanceof HTMLElement)) {\n    throw new Error('You must provide a valid dom element')\n  }\n  // get calculated style of element\n  let style = window.getComputedStyle(element)\n  // pick applicable properties, convert to int and reduce by adding\n  return ['height', 'padding-top', 'padding-bottom']\n    .map((key) => {\n      let int = parseInt(style.getPropertyValue(key), 10)\n      return isNaN(int) ? 0 : int\n    })\n    .reduce((sum, value) => sum + value)\n}\n","/* eslint-env browser */\n/**\n * get handle or return item\n * @param {Array<HTMLElement>} items\n * @param {string} selector\n */\nexport default (items: Array<HTMLElement>, selector: string): Array<HTMLElement> => {\n  if (!(items instanceof Array)) {\n    throw new Error('You must provide a Array of HTMLElements to be filtered.')\n  }\n\n  if (typeof selector !== 'string') {\n    return items\n  }\n\n  return items\n  // remove items without handle from array\n    .filter((item: HTMLElement) => {\n      return item.querySelector(selector) instanceof HTMLElement\n    })\n    // replace item with handle in array\n    .map((item: HTMLElement) => {\n      return item.querySelector(selector)\n    })\n}\n","/* eslint-env browser */\nimport {default as offset} from './offset'\n/**\n * defaultDragImage returns the current item as dragged image\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {object} elementOffset - an object with the offsets top, left, right & bottom\n * @param {Event} event - the original drag event object\n * @return {object} with element, posX and posY properties\n */\nlet defaultDragImage = (draggedElement: HTMLElement, elementOffset: offsetObject, event: DragEvent): object => {\n  return {\n    element: draggedElement,\n    posX: event.pageX - elementOffset.left,\n    posY: event.pageY - elementOffset.top\n  }\n}\n/**\n * attaches an element as the drag image to an event\n * @param {Event} event - the original drag event object\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {Function} customDragImage - function to create a custom dragImage\n * @return void\n */\nexport default (event: DragEvent, draggedElement: HTMLElement, customDragImage: Function): void => {\n  // check if event is provided\n  if (!(event instanceof Event)) {\n    throw new Error('setDragImage requires a DragEvent as the first argument.')\n  }\n  // check if draggedElement is provided\n  if (!(draggedElement instanceof HTMLElement)) {\n    throw new Error('setDragImage requires the dragged element as the second argument.')\n  }\n  // set default function of none provided\n  if (!customDragImage) {\n    customDragImage = defaultDragImage\n  }\n  // check if setDragImage method is available\n  if (event.dataTransfer && event.dataTransfer.setDragImage) {\n    // get the elements offset\n    let elementOffset = offset(draggedElement)\n    // get the dragImage\n    let dragImage = customDragImage(draggedElement, elementOffset, event)\n    // check if custom function returns correct values\n    if (!(dragImage.element instanceof HTMLElement) || typeof dragImage.posX !== 'number' || typeof dragImage.posY !== 'number') {\n      throw new Error('The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].')\n    }\n    // needs to be set for HTML5 drag & drop to work\n    event.dataTransfer.effectAllowed = 'copyMove'\n    // Firefox requires arbitrary content in setData for the drag & drop functionality to work\n    event.dataTransfer.setData('text/plain', 'arbitrary')\n    // set the drag image on the event\n    event.dataTransfer.setDragImage(dragImage.element, dragImage.posX, dragImage.posY)\n  }\n}\n","import store from './store'\n/**\n * Check if curList accepts items from destList\n * @param {sortable} destination the container an item is move to\n * @param {sortable} origin the container an item comes from\n */\nexport default (destination: sortable, origin: sortable) => {\n  // check if valid sortable\n  if (destination.isSortable === true) {\n    const acceptFrom = store(destination).getConfig('acceptFrom')\n    // check if acceptFrom is valid\n    if (acceptFrom !== null && acceptFrom !== false && typeof acceptFrom !== 'string') {\n      throw new Error('HTML5Sortable: Wrong argument, \"acceptFrom\" must be \"null\", \"false\", or a valid selector string.')\n    }\n\n    if (acceptFrom !== null) {\n      return acceptFrom !== false && acceptFrom.split(',').filter(function (sel) {\n        return sel.length > 0 && origin.matches(sel)\n      }).length > 0\n    }\n    // drop in same list\n    if (destination === origin) {\n      return true\n    }\n    // check if lists are connected with connectWith\n    if (store(destination).getConfig('connectWith') !== undefined && store(destination).getConfig('connectWith') !== null) {\n      return store(destination).getConfig('connectWith') === store(origin).getConfig('connectWith')\n    }\n  }\n  return false\n}\n","/* eslint-env browser */\n'use strict'\n\nimport './polyfill';\nimport { addData as _data, removeData as _removeData } from './data'\nimport _filter from './filter'\nimport { addEventListener as _on, removeEventListener as _off } from './eventListener'\nimport { addAttribute as _attr, removeAttribute as _removeAttr } from './attribute'\nimport _offset from './offset'\nimport _debounce from './debounce'\nimport _index from './index'\nimport isInDom from './isInDom'\nimport { insertBefore as _before, insertAfter as _after } from './insertHtmlElements'\nimport _serialize from './serialize'\nimport _makePlaceholder from './makePlaceholder'\nimport _getElementHeight from './elementHeight'\nimport _getHandles from './getHandles'\nimport setDragImage from './setDragImage'\nimport {default as store, stores} from './store'\nimport _listsConnected from './isConnected'\nimport defaultConfiguration from './defaultConfiguration'\nimport enableHoverClass from './hoverClass'\n/*\n * variables global to the plugin\n */\nlet dragging\nlet draggingHeight\n\n/*\n * Keeps track of the initialy selected list, where 'dragstart' event was triggered\n * It allows us to move the data in between individual Sortable List instances\n */\n\n// Origin List - data from before any item was changed\nlet originContainer\nlet originIndex\nlet originElementIndex\nlet originItemsBeforeUpdate\n\n// Destination List - data from before any item was changed\nlet destinationItemsBeforeUpdate\n\n/**\n * remove event handlers from items\n * @param {Array|NodeList} items\n */\nconst _removeItemEvents = function (items) {\n  _off(items, 'dragstart')\n  _off(items, 'dragend')\n  _off(items, 'dragover')\n  _off(items, 'dragenter')\n  _off(items, 'drop')\n  _off(items, 'mouseenter')\n  _off(items, 'mouseleave')\n}\n/**\n * _getDragging returns the current element to drag or\n * a copy of the element.\n * Is Copy Active for sortable\n * @param {HTMLElement} draggedItem - the item that the user drags\n * @param {HTMLElement} sortable a single sortable\n */\nconst _getDragging = function (draggedItem, sortable) {\n  let ditem = draggedItem\n  if (store(sortable).getConfig('copy') === true) {\n    ditem = draggedItem.cloneNode(true)\n    _attr(ditem, 'aria-copied', 'true')\n    draggedItem.parentElement.appendChild(ditem)\n    ditem.style.display = 'none'\n    ditem.oldDisplay = draggedItem.style.display\n  }\n  return ditem\n}\n/**\n * Remove data from sortable\n * @param {HTMLElement} sortable a single sortable\n */\nconst _removeSortableData = function (sortable) {\n  _removeData(sortable)\n  _removeAttr(sortable, 'aria-dropeffect')\n}\n/**\n * Remove data from items\n * @param {Array<HTMLElement>|HTMLElement} items\n */\nconst _removeItemData = function (items) {\n  _removeAttr(items, 'aria-grabbed')\n  _removeAttr(items, 'aria-copied')\n  _removeAttr(items, 'draggable')\n  _removeAttr(items, 'role')\n}\n/**\n * find sortable from element. travels up parent element until found or null.\n * @param {HTMLElement} element a single sortable\n */\nfunction findSortable (element) {\n  while (element.isSortable !== true) {\n    element = element.parentElement\n  }\n  return element\n}\n/**\n * Dragging event is on the sortable element. finds the top child that\n * contains the element.\n * @param {HTMLElement} sortableElement a single sortable\n * @param {HTMLElement} element is that being dragged\n */\nfunction findDragElement (sortableElement, element) {\n  const options = _data(sortableElement, 'opts')\n  const items = _filter(sortableElement.children, options.items)\n  const itemlist = items.filter(function (ele) {\n    return ele.contains(element)\n  })\n\n  return itemlist.length > 0 ? itemlist[0] : element\n}\n/**\n * Destroy the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nconst _destroySortable = function (sortableElement) {\n  const opts = _data(sortableElement, 'opts') || {}\n  const items = _filter(sortableElement.children, opts.items)\n  const handles = _getHandles(items, opts.handle)\n  // remove event handlers & data from sortable\n  _off(sortableElement, 'dragover')\n  _off(sortableElement, 'dragenter')\n  _off(sortableElement, 'drop')\n  // remove event data from sortable\n  _removeSortableData(sortableElement)\n  // remove event handlers & data from items\n  _off(handles, 'mousedown')\n  _removeItemEvents(items)\n  _removeItemData(items)\n}\n/**\n * Enable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nconst _enableSortable = function (sortableElement) {\n  const opts = _data(sortableElement, 'opts')\n  const items = _filter(sortableElement.children, opts.items)\n  const handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'move')\n  _data(sortableElement, '_disabled', 'false')\n  _attr(handles, 'draggable', 'true')\n  // @todo: remove this fix\n  // IE FIX for ghost\n  // can be disabled as it has the side effect that other events\n  // (e.g. click) will be ignored\n  if (opts.disableIEFix === false) {\n    const spanEl = (document || window.document).createElement('span')\n    if (typeof spanEl.dragDrop === 'function') {\n      _on(handles, 'mousedown', function () {\n        if (items.indexOf(this) !== -1) {\n          this.dragDrop()\n        } else {\n          let parent = this.parentElement\n          while (items.indexOf(parent) === -1) {\n            parent = parent.parentElement\n          }\n          parent.dragDrop()\n        }\n      })\n    }\n  }\n}\n/**\n * Disable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nconst _disableSortable = function (sortableElement) {\n  const opts = _data(sortableElement, 'opts')\n  const items = _filter(sortableElement.children, opts.items)\n  const handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'none')\n  _data(sortableElement, '_disabled', 'true')\n  _attr(handles, 'draggable', 'false')\n  _off(handles, 'mousedown')\n}\n/**\n * Reload the sortable\n * @param {HTMLElement} sortableElement a single sortable\n * @description events need to be removed to not be double bound\n */\nconst _reloadSortable = function (sortableElement) {\n  const opts = _data(sortableElement, 'opts')\n  const items = _filter(sortableElement.children, opts.items)\n  const handles = _getHandles(items, opts.handle)\n  _data(sortableElement, '_disabled', 'false')\n  // remove event handlers from items\n  _removeItemEvents(items)\n  _off(handles, 'mousedown')\n  // remove event handlers from sortable\n  _off(sortableElement, 'dragover')\n  _off(sortableElement, 'dragenter')\n  _off(sortableElement, 'drop')\n}\n\n/**\n * Public sortable object\n * @param {Array|NodeList} sortableElements\n * @param {object|string} options|method\n */\nexport default function sortable (sortableElements, options: object|string|undefined): sortable {\n  // get method string to see if a method is called\n  const method = String(options)\n  // merge user options with defaultss\n  options = Object.assign({\n    connectWith: null,\n    acceptFrom: null,\n    copy: false,\n    placeholder: null,\n    disableIEFix: null,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging',\n    hoverClass: false,\n    debounce: 0,\n    maxItems: 0,\n    itemSerializer: undefined,\n    containerSerializer: undefined,\n    customDragImage: null,\n    items: null\n    // if options is an object, merge it, otherwise use empty object\n  }, (typeof options === 'object') ? options : {})\n  // check if the user provided a selector instead of an element\n  if (typeof sortableElements === 'string') {\n    sortableElements = document.querySelectorAll(sortableElements)\n  }\n  // if the user provided an element, return it in an array to keep the return value consistant\n  if (sortableElements instanceof HTMLElement) {\n    sortableElements = [sortableElements]\n  }\n\n  sortableElements = Array.prototype.slice.call(sortableElements)\n\n  if (/serialize/.test(method)) {\n    return sortableElements.map((sortableContainer) => {\n      let opts = _data(sortableContainer, 'opts')\n      return _serialize(sortableContainer, opts.itemSerializer, opts.containerSerializer)\n    })\n  }\n\n  sortableElements.forEach(function (sortableElement) {\n    if (/enable|disable|destroy/.test(method)) {\n      return sortable[method](sortableElement)\n    }\n    // log deprecation\n    ['connectWith', 'disableIEFix'].forEach((configKey) => {\n      if (options.hasOwnProperty(configKey) && options[configKey] !== null) {\n        console.warn(`HTML5Sortable: You are using the deprecated configuration \"${configKey}\". This will be removed in an upcoming version, make sure to migrate to the new options when updating.`)\n      }\n    })\n    // merge options with default options\n    options = Object.assign({}, defaultConfiguration, options)\n    // init data store for sortable\n    store(sortableElement).config = options\n    // get options & set options on sortable\n    options = _data(sortableElement, 'opts') || options\n    _data(sortableElement, 'opts', options)\n    // property to define as sortable\n    sortableElement.isSortable = true\n    // reset sortable\n    _reloadSortable(sortableElement)\n    // initialize\n    const listItems = _filter(sortableElement.children, options.items)\n    // create element if user defined a placeholder element as a string\n    let customPlaceholder\n    if (options.placeholder !== null && options.placeholder !== undefined) {\n      let tempContainer = document.createElement(sortableElement.tagName)\n      tempContainer.innerHTML = options.placeholder\n      customPlaceholder = tempContainer.children[0]\n    }\n    // add placeholder\n    store(sortableElement).placeholder = _makePlaceholder(sortableElement, customPlaceholder, options.placeholderClass)\n\n    _data(sortableElement, 'items', options.items)\n\n    if (options.acceptFrom) {\n      _data(sortableElement, 'acceptFrom', options.acceptFrom)\n    } else if (options.connectWith) {\n      _data(sortableElement, 'connectWith', options.connectWith)\n    }\n\n    _enableSortable(sortableElement)\n    _attr(listItems, 'role', 'option')\n    _attr(listItems, 'aria-grabbed', 'false')\n    // enable hover class\n    enableHoverClass(sortableElement, true)\n    /*\n     Handle drag events on draggable items\n     Handle is set at the sortableElement level as it will bubble up\n     from the item\n     */\n    _on(sortableElement, 'dragstart', function (e) {\n      // ignore dragstart events\n      if (e.target.isSortable === true) {\n        return\n      }\n      e.stopImmediatePropagation()\n\n      if ((options.handle && !e.target.matches(options.handle)) || e.target.getAttribute('draggable') === 'false') {\n        return\n      }\n\n      const sortableContainer = findSortable(e.target)\n      const dragItem = findDragElement(sortableContainer, e.target)\n\n      // grab values\n      originItemsBeforeUpdate = _filter(sortableContainer.children, options.items)\n      originIndex = originItemsBeforeUpdate.indexOf(dragItem)\n      originElementIndex = _index(dragItem, sortableContainer.children)\n      originContainer = sortableContainer\n\n      // add transparent clone or other ghost to cursor\n      setDragImage(e, dragItem, options.customDragImage)\n      // cache selsection & add attr for dragging\n      draggingHeight = _getElementHeight(dragItem)\n      dragItem.classList.add(options.draggingClass)\n      dragging = _getDragging(dragItem, sortableContainer)\n      _attr(dragging, 'aria-grabbed', 'true')\n\n      // dispatch sortstart event on each element in group\n      sortableContainer.dispatchEvent(new CustomEvent('sortstart', {\n        detail: {\n          origin: {\n            elementIndex: originElementIndex,\n            index: originIndex,\n            container: originContainer\n          },\n          item: dragging\n        }\n      }))\n    })\n\n    /*\n     We are capturing targetSortable before modifications with 'dragenter' event\n    */\n    _on(sortableElement, 'dragenter', (e) => {\n      if (e.target.isSortable === true) {\n        return\n      }\n      const sortableContainer = findSortable(e.target)\n      destinationItemsBeforeUpdate = _filter(sortableContainer.children, _data(sortableContainer, 'items'))\n        .filter(item => item !== store(sortableElement).placeholder)\n    })\n    /*\n     * Dragend Event - https://developer.mozilla.org/en-US/docs/Web/Events/dragend\n     * Fires each time dragEvent end, or ESC pressed\n     * We are using it to clean up any draggable elements and placeholders\n     */\n    _on(sortableElement, 'dragend', function (e) {\n      if (!dragging) {\n        return\n      }\n\n      dragging.classList.remove(options.draggingClass)\n      _attr(dragging, 'aria-grabbed', 'false')\n\n      if (dragging.getAttribute('aria-copied') === 'true' && _data(dragging, 'dropped') !== 'true') {\n        dragging.remove()\n      }\n\n      dragging.style.display = dragging.oldDisplay\n      delete dragging.oldDisplay\n\n      const visiblePlaceholder = Array.from(stores.values()).map(data => data.placeholder)\n        .filter(placeholder => placeholder instanceof HTMLElement)\n        .filter(isInDom)[0]\n\n      if (visiblePlaceholder) {\n        visiblePlaceholder.remove()\n      }\n\n      // dispatch sortstart event on each element in group\n      sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n        detail: {\n          origin: {\n            elementIndex: originElementIndex,\n            index: originIndex,\n            container: originContainer\n          },\n          item: dragging\n        }\n      }))\n\n      dragging = null\n      draggingHeight = null\n    })\n\n    /*\n     * Drop Event - https://developer.mozilla.org/en-US/docs/Web/Events/drop\n     * Fires when valid drop target area is hit\n     */\n    _on(sortableElement, 'drop', function (e) {\n      if (!_listsConnected(sortableElement, dragging.parentElement)) {\n        return\n      }\n      e.preventDefault()\n      e.stopPropagation()\n\n      _data(dragging, 'dropped', 'true')\n      // get the one placeholder that is currently visible\n      const visiblePlaceholder = Array.from(stores.values()).map((data) => {\n        return data.placeholder\n      })\n        // filter only HTMLElements\n        .filter(placeholder => placeholder instanceof HTMLElement)\n        // filter only elements in DOM\n        .filter(isInDom)[0]\n      // attach element after placeholder\n      _after(visiblePlaceholder, dragging)\n      // remove placeholder from dom\n      visiblePlaceholder.remove()\n\n      /*\n       * Fires Custom Event - 'sortstop'\n       */\n      sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n        detail: {\n          origin: {\n            elementIndex: originElementIndex,\n            index: originIndex,\n            container: originContainer\n          },\n          item: dragging\n        }\n      }))\n\n      const placeholder = store(sortableElement).placeholder\n      const originItems = _filter(originContainer.children, options.items)\n        .filter(item => item !== placeholder)\n      const destinationContainer = this.isSortable === true ? this : this.parentElement\n      const destinationItems = _filter(destinationContainer.children, _data(destinationContainer, 'items'))\n        .filter(item => item !== placeholder)\n      const destinationElementIndex = _index(dragging, Array.from(dragging.parentElement.children)\n        .filter(item => item !== placeholder))\n      const destinationIndex = _index(dragging, destinationItems)\n\n      /*\n       * When a list item changed container lists or index within a list\n       * Fires Custom Event - 'sortupdate'\n       */\n      if (originElementIndex !== destinationElementIndex || originContainer !== destinationContainer) {\n        sortableElement.dispatchEvent(new CustomEvent('sortupdate', {\n          detail: {\n            origin: {\n              elementIndex: originElementIndex,\n              index: originIndex,\n              container: originContainer,\n              itemsBeforeUpdate: originItemsBeforeUpdate,\n              items: originItems\n            },\n            destination: {\n              index: destinationIndex,\n              elementIndex: destinationElementIndex,\n              container: destinationContainer,\n              itemsBeforeUpdate: destinationItemsBeforeUpdate,\n              items: destinationItems\n            },\n            item: dragging\n          }\n        }))\n      }\n    })\n\n    const debouncedDragOverEnter = _debounce((sortableElement, element, pageY) => {\n      if (!dragging) {\n        return\n      }\n\n      // set placeholder height if forcePlaceholderSize option is set\n      if (options.forcePlaceholderSize) {\n        store(sortableElement).placeholder.style.height = draggingHeight + 'px'\n      }\n      // if element the draggedItem is dragged onto is within the array of all elements in list\n      // (not only items, but also disabled, etc.)\n      if (Array.from(sortableElement.children).indexOf(element) > -1) {\n        const thisHeight = _getElementHeight(element)\n        const placeholderIndex = _index(store(sortableElement).placeholder, element.parentElement.children)\n        const thisIndex = _index(element, element.parentElement.children)\n        // Check if `element` is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          const deadZone = thisHeight - draggingHeight\n          const offsetTop = _offset(element).top\n          if (placeholderIndex < thisIndex && pageY < offsetTop) {\n            return\n          }\n          if (placeholderIndex > thisIndex &&\n              pageY > offsetTop + thisHeight - deadZone) {\n            return\n          }\n        }\n\n        if (dragging.oldDisplay === undefined) {\n          dragging.oldDisplay = dragging.style.display\n        }\n\n        if (dragging.style.display !== 'none') {\n          dragging.style.display = 'none'\n        }\n        if (placeholderIndex < thisIndex) {\n          _after(element, store(sortableElement).placeholder)\n        } else {\n          _before(element, store(sortableElement).placeholder)\n        }\n        // get placeholders from all stores & remove all but current one\n        Array.from(stores.values())\n          // remove empty values\n          .filter(data => data.placeholder !== undefined)\n          // foreach placeholder in array if outside of current sorableContainer -> remove from DOM\n          .forEach((data) => {\n            if (data.placeholder !== store(sortableElement).placeholder) {\n              data.placeholder.remove()\n            }\n          })\n      } else {\n        // get all placeholders from store\n        let placeholders = Array.from(stores.values())\n          .filter((data) => data.placeholder !== undefined)\n          .map((data) => {\n            return data.placeholder\n          })\n        // check if element is not in placeholders\n        if (placeholders.indexOf(element) === -1 && sortableElement === element && !_filter(element.children, options.items).length) {\n          placeholders.forEach((element) => element.remove())\n          element.appendChild(store(sortableElement).placeholder)\n        }\n      }\n    }, options.debounce)\n    // Handle dragover and dragenter events on draggable items\n    const onDragOverEnter = function (e) {\n      let element = e.target\n      const sortableElement = element.isSortable === true ? element : findSortable(element)\n      element = findDragElement(sortableElement, element)\n      if (!dragging || !_listsConnected(sortableElement, dragging.parentElement) || _data(sortableElement, '_disabled') === 'true') {\n        return\n      }\n      const options = _data(sortableElement, 'opts')\n      if (parseInt(options.maxItems) && _filter(sortableElement.children, _data(sortableElement, 'items')).length >= parseInt(options.maxItems) && dragging.parentElement !== sortableElement) {\n        return\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      e.dataTransfer.dropEffect = store(sortableElement).getConfig('copy') === true ? 'copy' : 'move'\n      debouncedDragOverEnter(sortableElement, element, e.pageY)\n    }\n\n    _on(listItems.concat(sortableElement), 'dragover', onDragOverEnter)\n    _on(listItems.concat(sortableElement), 'dragenter', onDragOverEnter)\n  })\n\n  return sortableElements\n}\n\nsortable.destroy = function (sortableElement) {\n  _destroySortable(sortableElement)\n}\n\nsortable.enable = function (sortableElement) {\n  _enableSortable(sortableElement)\n}\n\nsortable.disable = function (sortableElement) {\n  _disableSortable(sortableElement)\n}\n\n/* START.TESTS_ONLY */\nsortable.__testing = {\n  // add internal methods here for testing purposes\n  _data: _data,\n  _removeItemEvents: _removeItemEvents,\n  _removeItemData: _removeItemData,\n  _removeSortableData: _removeSortableData\n}\n/* END.TESTS_ONLY */\n","/**\n * default configurations\n */\nexport default {\n  items: null,\n  // deprecated\n  connectWith: null,\n  // deprecated\n  disableIEFix: null,\n  acceptFrom: null,\n  copy: false,\n  placeholder: null,\n  placeholderClass: 'sortable-placeholder',\n  draggingClass: 'sortable-dragging',\n  hoverClass: false,\n  debounce: 0,\n  throttleTime: 100,\n  maxItems: 0,\n  itemSerializer: undefined,\n  containerSerializer: undefined,\n  customDragImage: null\n}\n","/* eslint-env browser */\nimport store from './store'\nimport _filter from './filter'\nimport _throttle from './throttle'\nimport { addEventListener as _on, removeEventListener as _off } from './eventListener'\n/**\n * enable or disable hoverClass on mouseenter/leave if container Items\n * @param {sortable} sortableContainer a valid sortableContainer\n * @param {boolean} enable enable or disable event\n */\n// export default (sortableContainer: sortable, enable: boolean) => {\nexport default (sortableContainer: sortable, enable: boolean) => {\n  if (typeof store(sortableContainer).getConfig('hoverClass') === 'string') {\n    let hoverClasses = store(sortableContainer).getConfig('hoverClass').split(' ')\n    // add class on hover\n    if (enable === true) {\n      _on(sortableContainer, 'mousemove', _throttle((event) => {\n        // check of no mouse button was pressed when mousemove started == no drag\n        if (event.buttons === 0) {\n          _filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(item => {\n            if (item !== event.target) {\n              item.classList.remove(...hoverClasses)\n            } else {\n              item.classList.add(...hoverClasses)\n            }\n          })\n        }\n      }, store(sortableContainer).getConfig('throttleTime')))\n      // remove class on leave\n      _on(sortableContainer, 'mouseleave', () => {\n        _filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(item => {\n          item.classList.remove(...hoverClasses)\n        })\n      })\n    // remove events\n    } else {\n      _off(sortableContainer, 'mousemove')\n      _off(sortableContainer, 'mouseleave')\n    }\n  }\n}\n","/**\n * make sure a function is only called once within the given amount of time\n * @param {Function} fn the function to throttle\n * @param {number} threshold time limit for throttling\n */\n// must use function to keep this context\nexport default function (fn: Function, threshold: number = 250) {\n  // check function\n  if (typeof fn !== 'function') {\n    throw new Error('You must provide a function as the first argument for throttle.')\n  }\n  // check threshold\n  if (typeof threshold !== 'number') {\n    throw new Error('You must provide a number as the second argument for throttle.')\n  }\n\n  let lastEventTimestamp = null\n\n  return (...args) => {\n    let now = Date.now()\n    if (lastEventTimestamp === null || now - lastEventTimestamp >= threshold) {\n      lastEventTimestamp = now\n      fn.apply(this, args)\n    }\n  }\n}\n","/* eslint-env browser */\nimport {addData as _data} from './data' // yuk, data really needs to be refactored\nimport filter from './filter'\nimport index from './index'\n/**\n * Filter only wanted nodes\n * @param {HTMLElement} sortableContainer\n * @param {Function} customSerializer\n * @returns {Array}\n */\nexport default (sortableContainer: HTMLElement, customItemSerializer: Function = (serializedItem: serializedItem, sortableContainer: HTMLElement) => serializedItem, customContainerSerializer: Function = (serializedContainer: object) => serializedContainer): object => {\n  // check for valid sortableContainer\n  if (!(sortableContainer instanceof HTMLElement) || !sortableContainer.isSortable === true) {\n    throw new Error('You need to provide a sortableContainer to be serialized.')\n  }\n  // check for valid serializers\n  if (typeof customItemSerializer !== 'function' || typeof customContainerSerializer !== 'function') {\n    throw new Error('You need to provide a valid serializer for items and the container.')\n  }\n  // get options\n  let options = _data(sortableContainer, 'opts')\n\n  let item: string|undefined = options.items\n\n  // serialize container\n  let items = filter(sortableContainer.children, item)\n  let serializedItems: serializedItem[] = items.map((item) => {\n    return {\n      parent: sortableContainer,\n      node: item,\n      html: item.outerHTML,\n      index: index(item, items)\n    }\n  })\n  // serialize container\n  let container = {\n    node: sortableContainer,\n    itemCount: serializedItems.length\n  }\n\n  return {\n    container: customContainerSerializer(container),\n    items: serializedItems.map((item: object) => customItemSerializer(item, sortableContainer))\n  }\n}\n","/* eslint-env browser */\n/**\n * create a placeholder element\n * @param {HTMLElement} sortableElement a single sortable\n * @param {string|undefined} placeholder a string representing an html element\n * @param {string} placeholderClasses a string representing the classes that should be added to the placeholder\n */\nexport default (sortableElement: HTMLElement, placeholder?: HTMLElement, placeholderClass: string = 'sortable-placeholder') => {\n  if (!(sortableElement instanceof HTMLElement)) {\n    throw new Error('You must provide a valid element as a sortable.')\n  }\n  // if placeholder is not an element\n  if (!(placeholder instanceof HTMLElement) && placeholder !== undefined) {\n    throw new Error('You must provide a valid element as a placeholder or set ot to undefined.')\n  }\n  // if no placeholder element is given\n  if (placeholder === undefined) {\n    if (['UL', 'OL'].includes(sortableElement.tagName)) {\n      placeholder = document.createElement('li')\n    } else if (['TABLE', 'TBODY'].includes(sortableElement.tagName)) {\n      placeholder = document.createElement('tr')\n      // set colspan to always all rows, otherwise the item can only be dropped in first column\n      placeholder.innerHTML = '<td colspan=\"100\"></td>'\n    } else {\n      placeholder = document.createElement('div')\n    }\n  }\n  // add classes to placeholder\n  if (typeof placeholderClass === 'string') {\n    placeholder.classList.add(...placeholderClass.split(' '))\n  }\n\n  return placeholder\n}\n","/**\n * Creates and returns a new debounced version of the passed function which will postpone its execution until after wait milliseconds have elapsed\n * @param {Function} func to debounce\n * @param {number} time to wait before calling function with latest arguments, 0 - no debounce\n * @returns {function} - debounced function\n */\nexport default (func: Function, wait: number = 0): Function => {\n  let timeout\n  return (...args) => {\n    clearTimeout(timeout)\n    timeout = setTimeout(() => {\n      func(...args)\n    }, wait)\n  }\n}\n"],"names":["e","matches","element","key","value","undefined","h5s","data","nodes","selector","NodeList","HTMLCollection","Array","Error","from","filter","item","nodeType","Element","prototype","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","document","querySelectorAll","th","this","some","call","stores","Map","Object","Store","config","_config","forEach","mergedConfig","assign","entries","has","set","get","_placeholder","placeholder","HTMLElement","_data","delete","sortableElement","eventName","callback","i","length","addEventListener","store","setData","removeEventListener","getData","deleteData","attribute","addAttribute","setAttribute","removeAttribute","parentElement","rect","getClientRects","left","window","scrollX","right","top","scrollY","bottom","elementList","indexOf","parentNode","insertNode","referenceNode","newElement","position","insertBefore","nextElementSibling","target","insertAfter","style","getComputedStyle","map","int","parseInt","getPropertyValue","isNaN","reduce","sum","items","querySelector","defaultDragImage","draggedElement","elementOffset","event","posX","pageX","posY","pageY","destination","origin","isSortable","acceptFrom","getConfig","split","sel","dragging","draggingHeight","originContainer","originIndex","originElementIndex","originItemsBeforeUpdate","destinationItemsBeforeUpdate","connectWith","disableIEFix","copy","placeholderClass","draggingClass","hoverClass","debounce","throttleTime","maxItems","itemSerializer","containerSerializer","customDragImage","sortableContainer","enable","hoverClasses_1","_on","fn","threshold","lastEventTimestamp","_i","args","now","Date","apply","_this","_throttle","buttons","_filter","children","classList","remove","add","_off","_removeItemEvents","_getDragging","draggedItem","sortable","ditem","_attr","cloneNode","appendChild","display","oldDisplay","options","itemlist","ele","contains","_destroySortable","opts","handles","_getHandles","handle","_removeAttr","_removeItemData","_enableSortable","createElement","dragDrop","parent","_reloadSortable","sortableElements","method","String","slice","test","customItemSerializer","customContainerSerializer","serializedItem","serializedContainer","serializedItems","node","html","outerHTML","index","container","itemCount","_serialize","configKey","hasOwnProperty","console","warn","defaultConfiguration","customPlaceholder","listItems","tempContainer","tagName","innerHTML","includes","_makePlaceholder","enableHoverClass","stopImmediatePropagation","getAttribute","findSortable","dragItem","findDragElement","_index","Event","dataTransfer","setDragImage","dragImage","offset","effectAllowed","_getElementHeight","dispatchEvent","CustomEvent","detail","elementIndex","visiblePlaceholder","values","isInDom","_listsConnected","preventDefault","stopPropagation","_after","originItems","destinationContainer","destinationItems","destinationElementIndex","destinationIndex","itemsBeforeUpdate","func","wait","timeout","debouncedDragOverEnter","forcePlaceholderSize","height","thisHeight","placeholderIndex","thisIndex","deadZone","offsetTop","_offset","_before","placeholders","clearTimeout","setTimeout","onDragOverEnter","dropEffect","concat","destroy","disable","_disableSortable"],"mappings":"qCAAA,IAAUA,EACFC,ECOR,WAAkBC,EAAsBC,EAAaC,GACnD,QAAcC,IAAVD,EACF,OAAOF,GAAWA,EAAQI,KAAOJ,EAAQI,IAAIC,MAAQL,EAAQI,IAAIC,KAAKJ,GAEtED,EAAQI,IAAMJ,EAAQI,QACtBJ,EAAQI,IAAIC,KAAOL,EAAQI,IAAIC,SAC/BL,EAAQI,IAAIC,KAAKJ,GAAOC,ECPb,WAACI,EAAmDC,GACjE,KAAMD,aAAiBE,UAAYF,aAAiBG,gBAAkBH,aAAiBI,OACrF,MAAM,IAAIC,MAAM,gFAElB,MAAwB,iBAAbJ,EACFG,MAAME,KAAKN,GAGbI,MAAME,KAAKN,GAAOO,OAAO,SAACC,GAAS,OAAkB,IAAlBA,EAAKC,UAAkBD,EAAKf,QAAQQ,KFftET,EASPkB,QAAQC,UARHlB,EAAUD,EAAEC,SAAWD,EAAEoB,iBAAmBpB,EAAEqB,uBAAyBrB,EAAEsB,oBAAsBtB,EAAEuB,mBAAqBvB,EAAEwB,iBAOtHxB,EAAEC,QAAUD,EAAEoB,gBANnBnB,GAA2C,SAAiBQ,GACzD,IAAIR,EAAUwB,SAASC,iBAAiBjB,GACpCkB,EAAKC,KACT,OAAOhB,MAAMO,UAAUU,KAAKC,KAAK7B,EAAS,SAASD,GAC/C,OAAOA,IAAM2B,KGLlB,IAAII,EAAkC,IAAIC,iBAK1C,aACGJ,aAA4B,IAAII,IAChCJ,uBAA6BvB,EAC7BuB,WAA0B,IAAII,IAgHxC,OA1GEC,sBAAIC,0BAcJ,WAEE,IAAIC,KAKJ,OAJAP,KAAKQ,QAAQC,QAAQ,SAACjC,EAAOD,GAC3BgC,EAAOhC,GAAOC,IAGT+B,OArBT,SAAYA,GACV,GAAsB,iBAAXA,EACT,MAAM,IAAItB,MAAM,uEAGlB,IAAIyB,EAAeL,OAAOM,UAAWJ,GAErCP,KAAKQ,QAAU,IAAIJ,IAAIC,OAAOO,QAAQF,qCAuBxCJ,sBAAA,SAAW/B,EAAaC,GACtB,IAAKwB,KAAKQ,QAAQK,IAAItC,GACpB,MAAM,IAAIU,MAAM,6CAA6CV,GAG/DyB,KAAKQ,QAAQM,IAAIvC,EAAKC,IAQxB8B,sBAAA,SAAW/B,GACT,IAAKyB,KAAKQ,QAAQK,IAAItC,GACpB,MAAM,IAAIU,MAAM,yCAAyCV,GAE3D,OAAOyB,KAAKQ,QAAQO,IAAIxC,IAO1B8B,sBAAIC,+BAAJ,WACE,OAAON,KAAKgB,kBAQd,SAAiBC,GACf,KAAMA,aAAuBC,cAAgC,OAAhBD,EAC3C,MAAM,IAAIhC,MAAM,kDAElBe,KAAKgB,aAAeC,mCAStBX,oBAAA,SAAS/B,EAAaC,GACpB,GAAmB,iBAARD,EACT,MAAM,IAAIU,MAAM,6BAElBe,KAAKmB,MAAML,IAAIvC,EAAKC,IAQtB8B,oBAAA,SAAS/B,GACP,GAAmB,iBAARA,EACT,MAAM,IAAIU,MAAM,6BAElB,OAAOe,KAAKmB,MAAMJ,IAAIxC,IAQxB+B,uBAAA,SAAY/B,GACV,GAAmB,iBAARA,EACT,MAAM,IAAIU,MAAM,6BAElB,OAAOe,KAAKmB,MAAMC,OAAO7C,SAOd,WAAC8C,GAEd,KAAMA,aAA2BH,aAC/B,MAAM,IAAIjC,MAAM,oDAOlB,OAJKkB,EAAOU,IAAIQ,IACdlB,EAAOW,IAAIO,EAAiB,IAAIf,GAG3BH,EAAOY,IAAIM,GClIpB,WAA2B/C,EAAyCgD,EAAkBC,GACpF,GAAIjD,aAAmBU,MACrB,IAAK,IAAIwC,EAAI,EAAGA,EAAIlD,EAAQmD,SAAUD,EACpCE,EAAiBpD,EAAQkD,GAAIF,EAAWC,QAI5CjD,EAAQoD,iBAAiBJ,EAAWC,GACpCI,EAAMrD,GAASsD,QAAQ,QAAQN,EAAaC,GAM9C,WAA8BjD,EAAyCgD,GACrE,GAAIhD,aAAmBU,MACrB,IAAK,IAAIwC,EAAI,EAAGA,EAAIlD,EAAQmD,SAAUD,EACpCK,EAAoBvD,EAAQkD,GAAIF,QAIpChD,EAAQuD,oBAAoBP,EAAWK,EAAMrD,GAASwD,QAAQ,QAAQR,IACtEK,EAAMrD,GAASyD,WAAW,QAAQT,GCvBpC,WAAuBhD,EAAyC0D,EAAkBxD,GAChF,GAAIF,aAAmBU,MACrB,IAAK,IAAIwC,EAAI,EAAGA,EAAIlD,EAAQmD,SAAUD,EACpCS,EAAa3D,EAAQkD,GAAIQ,EAAWxD,QAIxCF,EAAQ4D,aAAaF,EAAWxD,GAMlC,WAA0BF,EAAyC0D,GACjE,GAAI1D,aAAmBU,MACrB,IAAK,IAAIwC,EAAI,EAAGA,EAAIlD,EAAQmD,SAAUD,EACpCW,EAAgB7D,EAAQkD,GAAIQ,QAIhC1D,EAAQ6D,gBAAgBH,GCrBX,WAAC1D,GACd,IAAKA,EAAQ8D,cACX,MAAM,IAAInD,MAAM,0CAGlB,IAAIoD,EAAO/D,EAAQgE,iBAAiB,GACpC,OACEC,KAAMF,EAAKE,KAAOC,OAAOC,QACzBC,MAAOL,EAAKK,MAAQF,OAAOC,QAC3BE,IAAKN,EAAKM,IAAMH,OAAOI,QACvBC,OAAQR,EAAKQ,OAASL,OAAOI,SCRlB,WAACtE,EAAsBwE,GACpC,KAAMxE,aAAmB4C,cAAkB4B,aAAuBhE,UAAYgE,aAAuB/D,gBAAkB+D,aAAuB9D,QAC5I,MAAM,IAAIC,MAAM,uDAGlB,OAAOD,MAAME,KAAK4D,GAAaC,QAAQzE,GCL1B,WAACA,GACd,KAAMA,aAAmB4C,aACvB,MAAM,IAAIjC,MAAM,kCAGlB,OAA8B,OAAvBX,EAAQ0E,WCJjB,IAAIC,EAAa,SAACC,EAA4BC,EAAyBC,GACrE,KAAMF,aAAyBhC,aAAkBgC,EAAcd,yBAAyBlB,aACtF,MAAM,IAAIjC,MAAM,qCAElBiE,EAAcd,cAAciB,aAC1BF,EACc,WAAbC,EAAwBF,EAAgBA,EAAcI,qBAQvDD,EAAe,SAACE,EAAqBjF,GAAyB,OAAA2E,EAAWM,EAAQjF,EAAS,WAM1FkF,EAAc,SAACD,EAAqBjF,GAAyB,OAAA2E,EAAWM,EAAQjF,EAAS,UCtB9E,WAACA,GACd,KAAMA,aAAmB4C,aACvB,MAAM,IAAIjC,MAAM,wCAGlB,IAAIwE,EAAQjB,OAAOkB,iBAAiBpF,GAEpC,OAAQ,SAAU,cAAe,kBAC9BqF,IAAI,SAACpF,GACJ,IAAIqF,EAAMC,SAASJ,EAAMK,iBAAiBvF,GAAM,IAChD,OAAOwF,MAAMH,GAAO,EAAIA,IAEzBI,OAAO,SAACC,EAAKzF,GAAU,OAAAyF,EAAMzF,ICXnB,WAAC0F,EAA2BrF,GACzC,KAAMqF,aAAiBlF,OACrB,MAAM,IAAIC,MAAM,4DAGlB,MAAwB,iBAAbJ,EACFqF,EAGFA,EAEJ/E,OAAO,SAACC,GACP,OAAOA,EAAK+E,cAActF,aAAqBqC,cAGhDyC,IAAI,SAACvE,GACJ,OAAOA,EAAK+E,cAActF,KCbhC,IAAIuF,EAAmB,SAACC,EAA6BC,EAA6BC,GAChF,OACEjG,QAAS+F,EACTG,KAAMD,EAAME,MAAQH,EAAc/B,KAClCmC,KAAMH,EAAMI,MAAQL,EAAc3B,MCPvB,WAACiC,EAAuBC,GAErC,IAA+B,IAA3BD,EAAYE,WAAqB,CACnC,IAAMC,EAAapD,EAAMiD,GAAaI,UAAU,cAEhD,GAAmB,OAAfD,IAAsC,IAAfA,GAA8C,iBAAfA,EACxD,MAAM,IAAI9F,MAAM,oGAGlB,GAAmB,OAAf8F,EACF,OAAsB,IAAfA,GAAwBA,EAAWE,MAAM,KAAK9F,OAAO,SAAU+F,GACpE,OAAOA,EAAIzD,OAAS,GAAKoD,EAAOxG,QAAQ6G,KACvCzD,OAAS,EAGd,GAAImD,IAAgBC,EAClB,OAAO,EAGT,QAAoDpG,IAAhDkD,EAAMiD,GAAaI,UAAU,gBAAgF,OAAhDrD,EAAMiD,GAAaI,UAAU,eAC5F,OAAOrD,EAAMiD,GAAaI,UAAU,iBAAmBrD,EAAMkD,GAAQG,UAAU,eAGnF,OAAO,MCJLG,EACAC,EAQAC,EACAC,EACAC,EACAC,EAGAC,KCpCFvB,MAAO,KAEPwB,YAAa,KAEbC,aAAc,KACdZ,WAAY,KACZa,MAAM,EACN3E,YAAa,KACb4E,iBAAkB,uBAClBC,cAAe,oBACfC,YAAY,EACZC,SAAU,EACVC,aAAc,IACdC,SAAU,EACVC,oBAAgB1H,EAChB2H,yBAAqB3H,EACrB4H,gBAAiB,MCTJ,WAACC,EAA6BC,GAC3C,GAAgE,iBAArD5E,EAAM2E,GAAmBtB,UAAU,cAA4B,CACxE,IAAIwB,EAAe7E,EAAM2E,GAAmBtB,UAAU,cAAcC,MAAM,MAE3D,IAAXsB,GACFE,EAAIH,EAAmB,qBCVJI,EAAcC,GAAvC,WAEE,gBAFqCA,OAEnB,mBAAPD,EACT,MAAM,IAAIzH,MAAM,mEAGlB,GAAyB,iBAAd0H,EACT,MAAM,IAAI1H,MAAM,kEAGlB,IAAI2H,EAAqB,KAEzB,OAAO,eAAC,aAAAC,mBAAAA,IAAAC,oBACN,IAAIC,EAAMC,KAAKD,OACY,OAAvBH,GAA+BG,EAAMH,GAAsBD,KAC7DC,EAAqBG,EACrBL,EAAGO,MAAMC,EAAMJ,KDNqBK,CAAU,SAAC5C,GAEvB,IAAlBA,EAAM6C,SACRC,EAAQf,EAAkBgB,SAAU3F,EAAM2E,GAAmBtB,UAAU,UAAUvE,QAAQ,SAAArB,WACnFA,IAASmF,EAAMhB,UACjBnE,EAAKmI,WAAUC,eAAUhB,MAEzBpH,EAAKmI,WAAUE,YAAOjB,MAI3B7E,EAAM2E,GAAmBtB,UAAU,kBAEtCyB,EAAIH,EAAmB,aAAc,WACnCe,EAAQf,EAAkBgB,SAAU3F,EAAM2E,GAAmBtB,UAAU,UAAUvE,QAAQ,SAAArB,YACvFA,EAAKmI,WAAUC,eAAUhB,SAK7BkB,EAAKpB,EAAmB,aACxBoB,EAAKpB,EAAmB,gBFS9B,IAAMqB,EAAoB,SAAUzD,GAClCwD,EAAKxD,EAAO,aACZwD,EAAKxD,EAAO,WACZwD,EAAKxD,EAAO,YACZwD,EAAKxD,EAAO,aACZwD,EAAKxD,EAAO,QACZwD,EAAKxD,EAAO,cACZwD,EAAKxD,EAAO,eASR0D,EAAe,SAAUC,EAAaC,GAC1C,IAAIC,EAAQF,EAQZ,OAP0C,IAAtClG,EAAMmG,GAAU9C,UAAU,UAE5BgD,EADAD,EAAQF,EAAYI,WAAU,GACjB,cAAe,QAC5BJ,EAAYzF,cAAc8F,YAAYH,GACtCA,EAAMtE,MAAM0E,QAAU,OACtBJ,EAAMK,WAAaP,EAAYpE,MAAM0E,SAEhCJ,GAwBT,WAAuBzJ,GACrB,MAA8B,IAAvBA,EAAQwG,YACbxG,EAAUA,EAAQ8D,cAEpB,OAAO9D,EAQT,WAA0B+C,EAAiB/C,GACzC,IAAM+J,EAAUlH,EAAME,EAAiB,QAEjCiH,EADQjB,EAAQhG,EAAgBiG,SAAUe,EAAQnE,OACjC/E,OAAO,SAAUoJ,GACtC,OAAOA,EAAIC,SAASlK,KAGtB,OAAOgK,EAAS7G,OAAS,EAAI6G,EAAS,GAAKhK,EAM7C,IAAMmK,EAAmB,SAAUpH,GACjC,IA5CoCyG,EbxDjBxJ,EaoGboK,EAAOvH,EAAME,EAAiB,YAC9B6C,EAAQmD,EAAQhG,EAAgBiG,SAAUoB,EAAKxE,OAC/CyE,EAAUC,EAAY1E,EAAOwE,EAAKG,QAExCnB,EAAKrG,EAAiB,YACtBqG,EAAKrG,EAAiB,aACtBqG,EAAKrG,EAAiB,Sb1GH/C,EawDiBwJ,EAoDhBzG,Gb3GR3C,YACHJ,EAAQI,IAAIC,KawDrBmK,EAAYhB,EAAU,mBAoDtBJ,EAAKiB,EAAS,aACdhB,EAAkBzD,GA/CI,SAAUA,GAChC4E,EAAY5E,EAAO,gBACnB4E,EAAY5E,EAAO,eACnB4E,EAAY5E,EAAO,aACnB4E,EAAY5E,EAAO,QA4CnB6E,CAAgB7E,IAMZ8E,EAAkB,SAAU3H,GAChC,IAAMqH,EAAOvH,EAAME,EAAiB,QAC9B6C,EAAQmD,EAAQhG,EAAgBiG,SAAUoB,EAAKxE,OAC/CyE,EAAUC,EAAY1E,EAAOwE,EAAKG,SACxCb,EAAM3G,EAAiB,kBAAmB,QAC1CF,EAAME,EAAiB,YAAa,SACpC2G,EAAMW,EAAS,YAAa,SAKF,IAAtBD,EAAK/C,gBAEwB,mBADf9F,UAAY2C,OAAO3C,UAAUoJ,cAAc,QACzCC,UAChBzC,EAAIkC,EAAS,YAAa,WACxB,IAA6B,IAAzBzE,EAAMnB,QAAQ/C,MAChBA,KAAKkJ,eACA,CAEL,IADA,IAAIC,EAASnJ,KAAKoC,eACgB,IAA3B8B,EAAMnB,QAAQoG,IACnBA,EAASA,EAAO/G,cAElB+G,EAAOD,gBAwBXE,EAAkB,SAAU/H,GAChC,IAAMqH,EAAOvH,EAAME,EAAiB,QAC9B6C,EAAQmD,EAAQhG,EAAgBiG,SAAUoB,EAAKxE,OAC/CyE,EAAUC,EAAY1E,EAAOwE,EAAKG,QACxC1H,EAAME,EAAiB,YAAa,SAEpCsG,EAAkBzD,GAClBwD,EAAKiB,EAAS,aAEdjB,EAAKrG,EAAiB,YACtBqG,EAAKrG,EAAiB,aACtBqG,EAAKrG,EAAiB,oBAQUgI,EAAkBhB,GAElD,IAAMiB,EAASC,OAAOlB,GA8BtB,OA5BAA,EAAUhI,OAAOM,QACf+E,YAAa,KACbX,WAAY,KACZa,MAAM,EACN3E,YAAa,KACb0E,aAAc,KACdE,iBAAkB,uBAClBC,cAAe,oBACfC,YAAY,EACZC,SAAU,EACVE,SAAU,EACVC,oBAAgB1H,EAChB2H,yBAAqB3H,EACrB4H,gBAAiB,KACjBnC,MAAO,MAEc,iBAAZmE,EAAwBA,MAEH,iBAArBgB,IACTA,EAAmBxJ,SAASC,iBAAiBuJ,IAG3CA,aAA4BnI,cAC9BmI,GAAoBA,IAGtBA,EAAmBrK,MAAMO,UAAUiK,MAAMtJ,KAAKmJ,GAE1C,YAAYI,KAAKH,GACZD,EAAiB1F,IAAI,SAAC2C,GAC3B,IAAIoC,EAAOvH,EAAMmF,EAAmB,QACpC,OIrOS,SAACA,EAAgCoD,EAAqHC,GAEnK,gBAF8CD,EAAiC,SAACE,EAAgCtD,GAAmC,OAAAsD,iBAAgBD,EAAsC,SAACE,GAAgC,OAAAA,MAEpOvD,aAA6BpF,cAAkD,IAAjCoF,EAAkBxB,WACpE,MAAM,IAAI7F,MAAM,6DAGlB,GAAoC,mBAAzByK,GAA4E,mBAA9BC,EACvD,MAAM,IAAI1K,MAAM,uEAGlB,IAEIG,EAFU+B,EAAMmF,EAAmB,QAEFpC,MAGjCA,EAAQ/E,EAAOmH,EAAkBgB,SAAUlI,GAC3C0K,EAAoC5F,EAAMP,IAAI,SAACvE,GACjD,OACE+J,OAAQ7C,EACRyD,KAAM3K,EACN4K,KAAM5K,EAAK6K,UACXC,MAAOA,EAAM9K,EAAM8E,MASvB,OACEiG,UAAWR,GALXI,KAAMzD,EACN8D,UAAWN,EAAgBrI,SAK3ByC,MAAO4F,EAAgBnG,IAAI,SAACvE,GAAiB,OAAAsK,EAAqBtK,EAAMkH,MJqM/D+D,CAAW/D,EAAmBoC,EAAKvC,eAAgBuC,EAAKtC,wBAInEiD,EAAiB5I,QAAQ,SAAUY,GACjC,GAAI,yBAAyBoI,KAAKH,GAChC,OAAOxB,EAASwB,GAAQjI,IAGzB,cAAe,gBAAgBZ,QAAQ,SAAC6J,GACnCjC,EAAQkC,eAAeD,IAAqC,OAAvBjC,EAAQiC,IAC/CE,QAAQC,KAAK,8DAA8DH,8GAI/EjC,EAAUhI,OAAOM,UAAW+J,EAAsBrC,GAElD1G,EAAMN,GAAiBd,OAAS8H,EAEhCA,EAAUlH,EAAME,EAAiB,SAAWgH,EAC5ClH,EAAME,EAAiB,OAAQgH,GAE/BhH,EAAgByD,YAAa,EAE7BsE,EAAgB/H,GAEhB,IAEIsJ,EAFEC,EAAYvD,EAAQhG,EAAgBiG,SAAUe,EAAQnE,OAG5D,GAA4B,OAAxBmE,EAAQpH,kBAAgDxC,IAAxB4J,EAAQpH,YAA2B,CACrE,IAAI4J,EAAgBhL,SAASoJ,cAAc5H,EAAgByJ,SAC3DD,EAAcE,UAAY1C,EAAQpH,YAClC0J,EAAoBE,EAAcvD,SAAS,GAG7C3F,EAAMN,GAAiBJ,YK3QZ,SAACI,EAA8BJ,EAA2B4E,GACvE,gBADuEA,4BACjExE,aAA2BH,aAC/B,MAAM,IAAIjC,MAAM,mDAGlB,KAAMgC,aAAuBC,mBAAgCzC,IAAhBwC,EAC3C,MAAM,IAAIhC,MAAM,6EAmBlB,YAhBoBR,IAAhBwC,KACG,KAAM,MAAM+J,SAAS3J,EAAgByJ,SACxC7J,EAAcpB,SAASoJ,cAAc,OAC3B,QAAS,SAAS+B,SAAS3J,EAAgByJ,UACrD7J,EAAcpB,SAASoJ,cAAc,OAEzB8B,UAAY,0BAExB9J,EAAcpB,SAASoJ,cAAc,QAIT,iBAArBpD,MACT5E,EAAYsG,WAAUE,YAAO5B,EAAiBZ,MAAM,MAG/ChE,QLkPgCgK,CAAiB5J,EAAiBsJ,EAAmBtC,EAAQxC,kBAElG1E,EAAME,EAAiB,QAASgH,EAAQnE,OAEpCmE,EAAQtD,WACV5D,EAAME,EAAiB,aAAcgH,EAAQtD,YACpCsD,EAAQ3C,aACjBvE,EAAME,EAAiB,cAAegH,EAAQ3C,aAGhDsD,EAAgB3H,GAChB2G,EAAM4C,EAAW,OAAQ,UACzB5C,EAAM4C,EAAW,eAAgB,SAEjCM,EAAiB7J,GAAiB,GAMlCoF,EAAIpF,EAAiB,YAAa,SAAUjD,GAE1C,IAA4B,IAAxBA,EAAEmF,OAAOuB,aAGb1G,EAAE+M,6BAEG9C,EAAQQ,QAAWzK,EAAEmF,OAAOlF,QAAQgK,EAAQQ,UAAmD,UAAvCzK,EAAEmF,OAAO6H,aAAa,cAAnF,CAIA,IAAM9E,EAAoB+E,EAAajN,EAAEmF,QACnC+H,EAAWC,EAAgBjF,EAAmBlI,EAAEmF,QAGtDiC,EAA0B6B,EAAQf,EAAkBgB,SAAUe,EAAQnE,OACtEoB,EAAcE,EAAwBzC,QAAQuI,GAC9C/F,EAAqBiG,EAAOF,EAAUhF,EAAkBgB,UACxDjC,EAAkBiB,EFjST,SAAC/B,EAAkBF,EAA6BgC,GAE7D,KAAM9B,aAAiBkH,OACrB,MAAM,IAAIxM,MAAM,4DAGlB,KAAMoF,aAA0BnD,aAC9B,MAAM,IAAIjC,MAAM,qEAOlB,GAJKoH,IACHA,EAAkBjC,GAGhBG,EAAMmH,cAAgBnH,EAAMmH,aAAaC,aAAc,CAEzD,IAEIC,EAAYvF,EAAgBhC,EAFZwH,EAAOxH,GAEoCE,GAE/D,KAAMqH,EAAUtN,mBAAmB4C,cAA0C,iBAAnB0K,EAAUpH,MAA+C,iBAAnBoH,EAAUlH,KACxG,MAAM,IAAIzF,MAAM,uIAGlBsF,EAAMmH,aAAaI,cAAgB,WAEnCvH,EAAMmH,aAAa9J,QAAQ,aAAc,aAEzC2C,EAAMmH,aAAaC,aAAaC,EAAUtN,QAASsN,EAAUpH,KAAMoH,EAAUlH,OEwQ3EiH,CAAavN,EAAGkN,EAAUjD,EAAQhC,iBAElCjB,EAAiB2G,EAAkBT,GACnCA,EAAS/D,UAAUE,IAAIY,EAAQvC,eAE/BkC,EADA7C,EAAWyC,EAAa0D,EAAUhF,GAClB,eAAgB,QAGhCA,EAAkB0F,cAAc,IAAIC,YAAY,aAC9CC,QACErH,QACEsH,aAAc5G,EACd2E,MAAO5E,EACP6E,UAAW9E,GAEbjG,KAAM+F,SAQZsB,EAAIpF,EAAiB,YAAa,SAACjD,GACjC,IAA4B,IAAxBA,EAAEmF,OAAOuB,WAAb,CAGA,IAAMwB,EAAoB+E,EAAajN,EAAEmF,QACzCkC,EAA+B4B,EAAQf,EAAkBgB,SAAUnG,EAAMmF,EAAmB,UACzFnH,OAAO,SAAAC,GAAQ,OAAAA,IAASuC,EAAMN,GAAiBJ,iBAOpDwF,EAAIpF,EAAiB,UAAW,SAAUjD,GACxC,GAAK+G,EAAL,CAIAA,EAASoC,UAAUC,OAAOa,EAAQvC,eAClCkC,EAAM7C,EAAU,eAAgB,SAEa,SAAzCA,EAASiG,aAAa,gBAA4D,SAA/BjK,EAAMgE,EAAU,YACrEA,EAASqC,SAGXrC,EAAS1B,MAAM0E,QAAUhD,EAASiD,kBAC3BjD,EAASiD,WAEhB,IAAMgE,EAAqBpN,MAAME,KAAKiB,EAAOkM,UAAU1I,IAAI,SAAAhF,GAAQ,OAAAA,EAAKsC,cACrE9B,OAAO,SAAA8B,GAAe,OAAAA,aAAuBC,cAC7C/B,OAAOmN,GAAS,GAEfF,GACFA,EAAmB5E,SAIrBnG,EAAgB2K,cAAc,IAAIC,YAAY,YAC5CC,QACErH,QACEsH,aAAc5G,EACd2E,MAAO5E,EACP6E,UAAW9E,GAEbjG,KAAM+F,MAIVA,EAAW,KACXC,EAAiB,QAOnBqB,EAAIpF,EAAiB,OAAQ,SAAUjD,GACrC,GAAKmO,EAAgBlL,EAAiB8D,EAAS/C,eAA/C,CAGAhE,EAAEoO,iBACFpO,EAAEqO,kBAEFtL,EAAMgE,EAAU,UAAW,QAE3B,IAAMiH,EAAqBpN,MAAME,KAAKiB,EAAOkM,UAAU1I,IAAI,SAAChF,GAC1D,OAAOA,EAAKsC,cAGX9B,OAAO,SAAA8B,GAAe,OAAAA,aAAuBC,cAE7C/B,OAAOmN,GAAS,GAEnBI,EAAON,EAAoBjH,GAE3BiH,EAAmB5E,SAKnBnG,EAAgB2K,cAAc,IAAIC,YAAY,YAC5CC,QACErH,QACEsH,aAAc5G,EACd2E,MAAO5E,EACP6E,UAAW9E,GAEbjG,KAAM+F,MAIV,IAAMlE,EAAcU,EAAMN,GAAiBJ,YACrC0L,EAActF,EAAQhC,EAAgBiC,SAAUe,EAAQnE,OAC3D/E,OAAO,SAAAC,GAAQ,OAAAA,IAAS6B,IACrB2L,GAA2C,IAApB5M,KAAK8E,WAAsB9E,KAAOA,KAAKoC,cAC9DyK,EAAmBxF,EAAQuF,EAAqBtF,SAAUnG,EAAMyL,EAAsB,UACzFzN,OAAO,SAAAC,GAAQ,OAAAA,IAAS6B,IACrB6L,EAA0BtB,EAAOrG,EAAUnG,MAAME,KAAKiG,EAAS/C,cAAckF,UAChFnI,OAAO,SAAAC,GAAQ,OAAAA,IAAS6B,KACrB8L,EAAmBvB,EAAOrG,EAAU0H,GAMtCtH,IAAuBuH,GAA2BzH,IAAoBuH,GACxEvL,EAAgB2K,cAAc,IAAIC,YAAY,cAC5CC,QACErH,QACEsH,aAAc5G,EACd2E,MAAO5E,EACP6E,UAAW9E,EACX2H,kBAAmBxH,EACnBtB,MAAOyI,GAET/H,aACEsF,MAAO6C,EACPZ,aAAcW,EACd3C,UAAWyC,EACXI,kBAAmBvH,EACnBvB,MAAO2I,GAETzN,KAAM+F,SAMd,IM5cY8H,EAAgBC,EAC1BC,EN2cIC,GM5cMH,EN4c6B,SAAC5L,EAAiB/C,EAASqG,GAClE,GAAKQ,EAUL,GALIkD,EAAQgF,uBACV1L,EAAMN,GAAiBJ,YAAYwC,MAAM6J,OAASlI,EAAiB,MAIjEpG,MAAME,KAAKmC,EAAgBiG,UAAUvE,QAAQzE,IAAY,EAAG,CAC9D,IAAMiP,EAAaxB,EAAkBzN,GAC/BkP,EAAmBhC,EAAO7J,EAAMN,GAAiBJ,YAAa3C,EAAQ8D,cAAckF,UACpFmG,EAAYjC,EAAOlN,EAASA,EAAQ8D,cAAckF,UAExD,GAAIiG,EAAanI,EAAgB,CAE/B,IAAMsI,EAAWH,EAAanI,EACxBuI,EAAYC,EAAQtP,GAASqE,IACnC,GAAI6K,EAAmBC,GAAa9I,EAAQgJ,EAC1C,OAEF,GAAIH,EAAmBC,GACnB9I,EAAQgJ,EAAYJ,EAAaG,EACnC,YAIwBjP,IAAxB0G,EAASiD,aACXjD,EAASiD,WAAajD,EAAS1B,MAAM0E,SAGR,SAA3BhD,EAAS1B,MAAM0E,UACjBhD,EAAS1B,MAAM0E,QAAU,QAEvBqF,EAAmBC,EACrBf,EAAOpO,EAASqD,EAAMN,GAAiBJ,aAEvC4M,EAAQvP,EAASqD,EAAMN,GAAiBJ,aAG1CjC,MAAME,KAAKiB,EAAOkM,UAEflN,OAAO,SAAAR,GAAQ,YAAqBF,IAArBE,EAAKsC,cAEpBR,QAAQ,SAAC9B,GACJA,EAAKsC,cAAgBU,EAAMN,GAAiBJ,aAC9CtC,EAAKsC,YAAYuG,eAGlB,CAEL,IAAIsG,EAAe9O,MAAME,KAAKiB,EAAOkM,UAClClN,OAAO,SAACR,GAAS,YAAqBF,IAArBE,EAAKsC,cACtB0C,IAAI,SAAChF,GACJ,OAAOA,EAAKsC,eAGuB,IAAnC6M,EAAa/K,QAAQzE,IAAmB+C,IAAoB/C,GAAY+I,EAAQ/I,EAAQgJ,SAAUe,EAAQnE,OAAOzC,SACnHqM,EAAarN,QAAQ,SAACnC,GAAY,OAAAA,EAAQkJ,WAC1ClJ,EAAQ4J,YAAYvG,EAAMN,GAAiBJ,0BMzgBrBiM,EN4gBzB7E,EAAQrC,YM5gBiBkH,KAEvB,eAAC,aAAArG,mBAAAA,IAAAC,oBACNiH,aAAaZ,GACbA,EAAUa,WAAW,WACnBf,eAAQnG,IACPoG,KNwgBGe,EAAkB,SAAU7P,GAChC,IAAIE,EAAUF,EAAEmF,OACVlC,GAAyC,IAAvB/C,EAAQwG,WAAsBxG,EAAU+M,EAAa/M,GAE7E,GADAA,EAAUiN,EAAgBlK,EAAiB/C,GACtC6G,GAAaoH,EAAgBlL,EAAiB8D,EAAS/C,gBAA0D,SAAxCjB,EAAME,EAAiB,aAArG,CAGA,IAAMgH,EAAUlH,EAAME,EAAiB,QACnCwC,SAASwE,EAAQnC,WAAamB,EAAQhG,EAAgBiG,SAAUnG,EAAME,EAAiB,UAAUI,QAAUoC,SAASwE,EAAQnC,WAAaf,EAAS/C,gBAAkBf,IAGxKjD,EAAEoO,iBACFpO,EAAEqO,kBACFrO,EAAEsN,aAAawC,YAA0D,IAA7CvM,EAAMN,GAAiB2D,UAAU,QAAmB,OAAS,OACzFoI,EAAuB/L,EAAiB/C,EAASF,EAAEuG,UAGrD8B,EAAImE,EAAUuD,OAAO9M,GAAkB,WAAY4M,GACnDxH,EAAImE,EAAUuD,OAAO9M,GAAkB,YAAa4M,KAG/C5E,UAGTvB,EAASsG,QAAU,SAAU/M,GAC3BoH,EAAiBpH,IAGnByG,EAASvB,OAAS,SAAUlF,GAC1B2H,EAAgB3H,IAGlByG,EAASuG,QAAU,SAAUhN,IAzYJ,SAAUA,GACjC,IAAMqH,EAAOvH,EAAME,EAAiB,QAE9BsH,EAAUC,EADFvB,EAAQhG,EAAgBiG,SAAUoB,EAAKxE,OAClBwE,EAAKG,QACxCb,EAAM3G,EAAiB,kBAAmB,QAC1CF,EAAME,EAAiB,YAAa,QACpC2G,EAAMW,EAAS,YAAa,SAC5BjB,EAAKiB,EAAS,aAmYd2F,CAAiBjN"}