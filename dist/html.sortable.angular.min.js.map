{"version":3,"sources":["html.sortable.angular.js"],"names":["angular","module","directive","$timeout","$parse","require","link","scope","element","attrs","ngModel","opts","model","scallback","noop","htmlSortableCallback","extend","$eval","htmlSortable","sortable","$render","$watch","bind","e","data","$source","startparent","attr","$dest","endparent","$sourceModel","$destModel","$start","oldindex","$end","item","index","$apply","$items","splice","assign","$item","$sourceItems","$destItems","startModel","destModel","start","end"],"mappings":"CAUE,SAASA,GACT,YAEAA,GAAQC,OAAO,mBACZC,UAAU,gBACT,WAAY,SAAU,SAASC,EAAUC,GACvC,OACEC,QAAS,WAETC,KAAM,SAASC,EAAOC,EAASC,EAAOC,GACpC,GAAIC,GACAC,EACAC,EAAYb,EAAQc,IAEpBL,GAAMM,uBACRF,EAAYT,EAAOK,EAAMM,uBAG3BJ,EAAOX,EAAQgB,UAAWT,EAAMU,MAAMR,EAAMS,eAC5CV,EAAQW,SAASR,GAEbD,IACFE,EAAQR,EAAOK,EAAMC,SAErBA,EAAQU,QAAU,WAChBjB,EAAS,WACPK,EAAQW,SAAS,WAChB,KAGLZ,EAAMc,OAAOT,EAAO,WAClBT,EAAS,WACPK,EAAQW,SAAS,WAChB,MACF,GAEHX,EAAQW,WAAWG,KAAK,aAAc,SAASC,EAAGC,GAChD,GAAIC,GAAUD,EAAKE,YAAYC,KAAK,aAAeH,EAAKE,YAAYC,KAAK,iBACrEC,EAAUJ,EAAKK,UAAUF,KAAK,aAAeH,EAAKK,UAAUF,KAAK,iBAEjEG,EAAe1B,EAAOqB,GACtBM,EAAa3B,EAAOwB,GAEpBI,EAASR,EAAKS,SACdC,EAASV,EAAKW,KAAKC,OAEvB7B,GAAM8B,OAAO,WAGX,GAAIP,EAAaN,EAAKE,YAAYnB,WAAawB,EAAWP,EAAKK,UAAUtB,SAAU,CAEjF,GAAI+B,GAASR,EAAaN,EAAKE,YAAYnB,QAC3C+B,GAAOC,OAAOL,EAAM,EAAGI,EAAOC,OAAOP,EAAQ,GAAG,IAChDF,EAAaU,OAAOjC,EAAO+B,OACtB,CACL,GAAIG,GAAQX,EAAaN,EAAKE,YAAYnB,SAASyB,GAC/CU,EAAeZ,EAAaN,EAAKE,YAAYnB,SAC7CoC,EAAaZ,EAAWP,EAAKK,UAAUtB,YAE3CmC,GAAaH,OAAOP,EAAQ,GAC5BW,EAAWJ,OAAOL,EAAM,EAAGO,GAE3BX,EAAaU,OAAOjC,EAAOmC,GAC3BX,EAAWS,OAAOjC,EAAOoC,MAI7B9B,EAAUN,GACRqC,WAAYd,EAAaN,EAAKE,YAAYnB,SAC1CsC,UAAWd,EAAWP,EAAKK,UAAUtB,SACrCuC,MAAOd,EACPe,IAAKb,aAQrBlC","file":"html.sortable.angular.min.js","sourcesContent":["/*\r\n * AngularJS integration with the HTML5 Sortable jQuery Plugin\r\n * https://github.com/voidberg/html5sortable\r\n *\r\n * Copyright 2013, Alexandru Badiu <andu@ctrlz.ro>\r\n *\r\n * Thanks to the following contributors: samantp.\r\n *\r\n * Released under the MIT license.\r\n */\r\n;(function(angular) {\r\n  'use strict';\r\n\r\n  angular.module('htmlSortable', [])\r\n    .directive('htmlSortable', [\r\n      '$timeout', '$parse', function($timeout, $parse) {\r\n        return {\r\n          require: '?ngModel',\r\n          // TODO: fix this, if you know angular\r\n          link: function(scope, element, attrs, ngModel) { // jshint ignore:line\r\n            var opts;\r\n            var model;\r\n            var scallback = angular.noop;\r\n\r\n            if (attrs.htmlSortableCallback) {\r\n              scallback = $parse(attrs.htmlSortableCallback);\r\n            }\r\n\r\n            opts = angular.extend({}, scope.$eval(attrs.htmlSortable));\r\n            element.sortable(opts);\r\n\r\n            if (ngModel) {\r\n              model = $parse(attrs.ngModel);\r\n\r\n              ngModel.$render = function() {\r\n                $timeout(function() {\r\n                  element.sortable('reload');\r\n                }, 50);\r\n              };\r\n\r\n              scope.$watch(model, function() {\r\n                $timeout(function() {\r\n                  element.sortable('reload');\r\n                }, 50);\r\n              }, true);\r\n\r\n              element.sortable().bind('sortupdate', function(e, data) {\r\n                var $source = data.startparent.attr('ng-model') || data.startparent.attr('data-ng-model');\r\n                var $dest   = data.endparent.attr('ng-model') || data.endparent.attr('data-ng-model');\r\n\r\n                var $sourceModel = $parse($source);\r\n                var $destModel = $parse($dest);\r\n\r\n                var $start = data.oldindex;\r\n                var $end   = data.item.index();\r\n\r\n                scope.$apply(function() {\r\n                  // TODO: fix this, if you know angular\r\n                  //jscs:disable\r\n                  if ($sourceModel(data.startparent.scope()) === $destModel(data.endparent.scope())) {\r\n                    //jscs:enable\r\n                    var $items = $sourceModel(data.startparent.scope());\r\n                    $items.splice($end, 0, $items.splice($start, 1)[0]);\r\n                    $sourceModel.assign(scope, $items);\r\n                  } else {\r\n                    var $item = $sourceModel(data.startparent.scope())[$start];\r\n                    var $sourceItems = $sourceModel(data.startparent.scope());\r\n                    var $destItems = $destModel(data.endparent.scope()) || [];\r\n\r\n                    $sourceItems.splice($start, 1);\r\n                    $destItems.splice($end, 0, $item);\r\n\r\n                    $sourceModel.assign(scope, $sourceItems);\r\n                    $destModel.assign(scope, $destItems);\r\n                  }\r\n                });\r\n\r\n                scallback(scope, {\r\n                  startModel: $sourceModel(data.startparent.scope()),\r\n                  destModel: $destModel(data.endparent.scope()),\r\n                  start: $start,\r\n                  end: $end\r\n                });\r\n              });\r\n            }\r\n          }\r\n        };\r\n      }\r\n    ]);\r\n}(angular));\r\n"],"sourceRoot":"/source/"}